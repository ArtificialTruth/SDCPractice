

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Case Study (Illustrating the SDC Process) &mdash; Readthedocs  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Lists" href="lists.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Readthedocs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Practice guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary_acr.html">Glossary and list of acronyms</a></li>
<li class="toctree-l1"><a class="reference internal" href="SDC_intro.html">Statistical Disclosure Control (SDC): An Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="measure_risk.html">Measuring Risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="anon_methods.html">Anonymization Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">Measuring Utility and Information Loss</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdcMicro.html">SDC with <em>sdcMicro</em> in <em>R</em>: Setting Up Your Data and more</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">The SDC Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html"><strong>Bibliography</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="lists.html">Lists</a></li>
</ul>
<p class="caption"><span class="caption-text">Case studies</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Case Study (Illustrating the SDC Process)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#case-study-1-suf">Case study 1- SUF</a></li>
<li class="toctree-l2"><a class="reference internal" href="#case-study-2-puf">Case study 2 - PUF</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Readthedocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Case Study (Illustrating the SDC Process)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/case_studies.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="case-study-illustrating-the-sdc-process">
<h1>Case Study (Illustrating the SDC Process)<a class="headerlink" href="#case-study-illustrating-the-sdc-process" title="Permalink to this headline">¶</a></h1>
<p>In order to evaluate the use of different SDC methods on different types
of survey datasets, we compared the results of the different methods
applied to 75 datasets from 52 countries representing six geographic
regions: Latin America and the Caribbean (LAC), Sub-Saharan Africa
(AFR), South Asia (SA), Europe and Central Asia (ECA), Middle East and
North Africa (MENA) as well as East Asia and the Pacific (EAP). The
datasets chosen were from a mix of datasets that are already publically
available, as well as data made available only to the World Bank for
official business. The surveys used included, amongst others, household,
demographic, and health surveys. The variables from these surveys used
for the experiments were selected based on their relevance for users
(e.g. for indicators, MDGs), their sensitivity, and their classification
with respect to the SDC process.</p>
<p>The following case studies draw from knowledge gained from these
experiments and try to incorporate the lessons learned. The case studies
use synthetic data that mimic the structure of the survey types we used
in our experiments and present the anonymization of a dataset similar to
many surveys designed to measure household income and consumption, labor
force participation and general demographic characteristics. The first
case study creates a SUF, whereas in the second case study we take this
SUF and treat it further to create a PUF.</p>
<div class="section" id="case-study-1-suf">
<h2>Case study 1- SUF<a class="headerlink" href="#case-study-1-suf" title="Permalink to this headline">¶</a></h2>
<p>This case study shows an example of how the anonymization process might
be approached, particularly for a dataset with many continuous
variables. We also show how this can be achieved using the open source
and free <em>sdcMicro</em> package and <em>R</em>. A ready-to-run <em>R</em> script for this
case study and the dataset are also available to reproduce the results
and allow the user to adapt the code
(see&nbsp;<a class="reference external" href="http://ihsn.org/home/projects/sdc-practice">http://ihsn.org/home/projects/sdc-practice</a>). Extracts of this code
are presented in this section to illustrate several steps of the
anonymization process. <strong>NOTE: The choices of methods and parameters in
this case study are based on this particular dataset and the results and
choices might be different for other datasets.</strong> The aim is to show the
process, not to compare methods per se.</p>
<p>This example uses a dataset with a similar structure to that of a
typical social survey with a focus on demographics, labor force
participation and income and expenditure patterns. The dataset has been
compiled using observations from several datasets from different
countries. They are considered synthetic data and as such are used only
for illustrative purposes. The source datasets were already treated for
disclosure control by their producers. This does not matter, as our
concern is to illustrate the process only. The data from which we
compiled our case study file was from surveys that contain many
variables, but pay particular attention to labor force variables as well
as household income and household expenditure variables. The variables
in the demo dataset have already been pre-selected from the total set of
variables available in the datasets. See Appendix A for the complete
overview of all variables.</p>
<p>This case study follows the steps of the SDC process outlined in Chapter
8.</p>
<p><strong>Step 1: Need for disclosure control</strong></p>
<p>The statistical units in this dataset are individuals and households.
The household structure provides a hierarchical structure in the data,
which should be taken into account when measuring risk and selecting
anonymization methods.</p>
<p>The data contains variables with demographic information, income,
expenditures, education variables and variables relating to the labor
status of the individual. These variables include sensitive and
confidential variables. The dataset is an example of a social survey
and, due to the nature of the statistical units and the variables,
disclosure control is needed before release of the microdata. This is
the case regardless of the legal framework, which is not specified here,
as this is a hypothetical dataset.</p>
<p><strong>Step 2: Data preparation and exploring data characteristics</strong></p>
<p>The first step is to explore the data. To analyze the data in <em>R</em> we
first have to read the data into <em>R</em>. In our case, the data is saved in
a <em>STATA</em> file (.dta). To read <em>STATA</em> files, we need to load the <em>R</em>
package <em>foreign</em> (see Section 7.2 on importing other data formats in
<em>R</em>). We also load the <em>sdcMicro</em> package and several other packages
used later for the computation of the utility measures. If these
packages are not yet installed, you should do so before trying to load
them. The <em>R</em> code for this case study demonstrates how to do this.</p>
<p>Example 9.1: Loading required packages</p>
<div class="line-block">
<div class="line"><em># Load required packages</em></div>
<div class="line"><strong>library</strong>(foreign) <em># for read/write function for STATA files</em></div>
<div class="line"><strong>library</strong>(sdcMicro) <em># sdcMicro package with functions for the SDC
process</em></div>
</div>
<p><strong>library</strong>(laeken) <em># for GINI</em></p>
<p><strong>library</strong>(reldist) <em># for GINI</em></p>
<div class="line-block">
<div class="line"><strong>library</strong>(bootstrap) <em># for bootstrapping</em></div>
<div class="line"><strong>library</strong>(ineq) <em># for Lorenz curves</em></div>
</div>
<p>After setting the working directory to the directory where the <em>STATA</em>
file is stored, we load the data into the object called <em>file</em>. All
output, unless otherwise specified, is saved in the working directory.</p>
<p>Example 9.2: Loading the data</p>
<p><strong>setwd</strong>(“C:/WorldBank/CaseStudy/”) <em># Set working directory</em></p>
<div class="line-block">
<div class="line"><em># Specify file name</em></div>
<div class="line">fname &lt;- ” case_1_data.dta”</div>
<div class="line"><em># Read-in file</em></div>
<div class="line">file &lt;- <strong>read.dta</strong>(fname, convert.factors = F) <em># factors as
numeric code</em></div>
</div>
<p>We check the number of variables, number of observations and variable
names, as shown in Example 9.3.</p>
<p>Example 9.3: Number of individuals and variables and variable names</p>
<p><strong>dim</strong>(file) <em># Dimensions of file (observations, variables)</em></p>
<p>## [1] 10574 68</p>
<p><strong>colnames</strong>(file) <em># Variable names</em></p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">[1]</span> <span class="pre">&quot;REGION&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;DIST&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;URBRUR&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;WGTHH&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">[5]</span> <span class="pre">&quot;WGTPOP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;IDH&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;IDP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;HHSIZE&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">[9]</span> <span class="pre">&quot;GENDER&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;REL&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;MARITAL&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;AGEYRS&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[13]</span> <span class="pre">&quot;AGEMTH&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;RELIG&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;ETHNICITY&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">&quot;LANGUAGE&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[17]</span> <span class="pre">&quot;MORBID&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;MEASLES&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;MEDATT&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;CHWEIGHTKG&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[21]</span> <span class="pre">&quot;CHHEIGHTCM&quot;</span>&#160;&#160;&#160; <span class="pre">&quot;ATSCHOOL&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;EDUCY&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;EDYRS&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[25]</span> <span class="pre">&quot;EDYRSCURRAT&quot;</span>&#160;&#160; <span class="pre">&quot;SCHTYP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;LITERACY&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;EMPTYP1&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[29]</span> <span class="pre">&quot;UNEMP1&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INDUSTRY1&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">&quot;EMPCAT1&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;WHOURSWEEK1&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[33]</span> <span class="pre">&quot;OWNHOUSE&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;ROOF&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TOILET&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;ELECTCON&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[37]</span> <span class="pre">&quot;FUELCOOK&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;WATER&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;OWNAGLAND&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">&quot;LANDSIZEHA&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[41]</span> <span class="pre">&quot;OWNMOTORCYCLE&quot;</span> <span class="pre">&quot;CAR&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TV&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;LIVESTOCK&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[45]</span> <span class="pre">&quot;INCRMT&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCWAGE&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCBONSOCALL&quot;</span>&#160; <span class="pre">&quot;INCFARMBSN&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[49]</span> <span class="pre">&quot;INCNFARMBSN&quot;</span>&#160;&#160; <span class="pre">&quot;INCRENT&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCFIN&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCPENSN&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[53]</span> <span class="pre">&quot;INCOTHER&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCTOTGROSSHH&quot;</span> <span class="pre">&quot;FARMEMP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;THOUSEXP&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[57]</span> <span class="pre">&quot;TFOODEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TALCHEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TCLTHEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TFURNEXP&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[61]</span> <span class="pre">&quot;THLTHEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TTRANSEXP&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">&quot;TCOMMEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TRECEXP&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[65]</span> <span class="pre">&quot;TEDUEXP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TRESTHOTEXP&quot;</span>&#160;&#160; <span class="pre">&quot;TMISCEXP&quot;</span></code><code class="docutils literal notranslate"><span class="pre">&quot;TANHHEXP&quot;</span></code></div>
</div>
<p>The dataset has 10,574 individuals in 2,000 households and contains 68
variables. The survey corresponds to a population of about 4.3 million
individuals, which means that the sample is relatively small and the
sample weights are high. This has an impact on the disclosure risk, as
we will see in Steps 6a and 6b.</p>
<p>To get an overview of the values of the variables, we use tabulations
and cross-tabulations for categorical variables and summary statistics
for continuous variables. To include the number of missing values (NA or
other), we use the option useNA = “ifany” in the table() function (see</p>
<p>Example 9.4).</p>
<p>In Table 9.1 the variables in the dataset are listed along with concise
descriptions of the variables, the level at which they are collected
(individual (IND), household (HH)), the measurement type (continuous,
semi-continuous, categorical) and value ranges. Note that the dataset
contains a selection of 68 variables (cf. Appendix A) of a total of 112
variables in the survey dataset. The variables have been preselected
based on their relevance for data users. This allows to reduce the total
numbers of variables to consider in the anonymization process and makes
the process easier. The numerical values for many of the categorical
variables are codes that refer to values, e.g., in the variable URBRUR,
1 stands for rural and 2 for urban. More information on the meanings of
coded values of the categorical variables is available in the <em>R</em> code
for this case study.</p>
<p>We identified the following sensitive variables in the data: ETHNICITY,
RELIGION, variables related to the labor force status of the individual
and the variables containing information on income and expenditures of
the household. Whether variables can be identified as sensitive may vary
across countries and datasets.</p>
<p>The case study dataset does not have any direct identifiers that, if
they were present, would need to be removed at this stage. Examples of
direct identifiers would be names, telephone numbers, geographical
location coordinates, etc.</p>
<p>Example 9.4: Tabulation of the variable ‘gender’ and summary statistics
for the variable ‘total annual expenditures’ in <em>R</em></p>
<p><strong>table</strong>(file$GENDER, useNA = “ifany”) <em># tabulation of variable
GENDER (sex, categorical)</em></p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">0</span>&#160;&#160;&#160; <span class="pre">1</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">5448</span> <span class="pre">5126</span></code></div>
</div>
<p><strong>summary</strong>(file$TANHHEXP) <em># summary statistics for variable TANHHEXP
(total annual household expenditures, continuous)</em></p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">Min.</span> <span class="pre">1st</span> <span class="pre">Qu.</span>&#160; <span class="pre">Median</span>&#160;&#160;&#160; <span class="pre">Mean</span> <span class="pre">3rd</span> <span class="pre">Qu.</span>&#160;&#160;&#160; <span class="pre">Max.</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">498</span>&#160;&#160; <span class="pre">15550</span>&#160;&#160; <span class="pre">17290</span>&#160;&#160; <span class="pre">28560</span>&#160;&#160; <span class="pre">29720</span>&#160; <span class="pre">353200</span></code></div>
</div>
<p>Table 9.1 Overview of variables in dataset</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">No.</th>
<th class="head">Variable
name</th>
<th class="head">Description</th>
<th class="head">Level</th>
<th class="head">Measurement</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>IDH</td>
<td>Household
ID</td>
<td>HH</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1-2,000</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>IDP</td>
<td>Individua
l
ID</td>
<td>IND</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1-33</td>
</tr>
<tr class="row-even"><td>3</td>
<td>REGION</td>
<td>Region</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>DISTRICT</td>
<td>District</td>
<td>HH</td>
<td>categoric
al</td>
<td>101-1105</td>
</tr>
<tr class="row-even"><td>5</td>
<td>URBRUR</td>
<td>Area of
residence</td>
<td>HH</td>
<td>categoric
al</td>
<td>1, 2</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>WGTHH</td>
<td>Individua
l
weighting
coefficie
nt</td>
<td>HH</td>
<td>weight</td>
<td>31.2-8495
.7</td>
</tr>
<tr class="row-even"><td>7</td>
<td>WGTPOP</td>
<td>Populatio
n
weighting
coefficie
nt</td>
<td>IND</td>
<td>weight</td>
<td>45.8-9345
2.2</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>HHSIZE</td>
<td>Household
size</td>
<td>HH</td>
<td>semi-cont
inuous</td>
<td>1-33</td>
</tr>
<tr class="row-even"><td>9</td>
<td>GENDER</td>
<td>Gender</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>REL</td>
<td>Relations
hip
to
household
head</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-9</td>
</tr>
<tr class="row-even"><td>11</td>
<td>MARITAL</td>
<td>Marital
status</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>AGEYRS</td>
<td>Age in
completed
years</td>
<td>IND</td>
<td>semi-cont
inuous</td>
<td>0-95
(under 1,
1/12 year
increment
s)</td>
</tr>
<tr class="row-even"><td>13</td>
<td>AGEMTH</td>
<td>Age of
child in
completed
years</td>
<td>IND</td>
<td>semi-cont
inuous</td>
<td>1-1140</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>RELIG</td>
<td>Religion
of
household
head</td>
<td>HH</td>
<td>categoric
al</td>
<td>1, 5-7, 9</td>
</tr>
<tr class="row-even"><td>15</td>
<td>ETHNICITY</td>
<td>Ethnicity
of
household
head</td>
<td>HH</td>
<td>categoric
al</td>
<td>all
missing
values</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>LANGUAGE</td>
<td>Language
of
household
head</td>
<td>HH</td>
<td>categoric
al</td>
<td>all
missing
values</td>
</tr>
<tr class="row-even"><td>17</td>
<td>MORBID</td>
<td>Morbidity
last x
weeks</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>MEASLES</td>
<td>Child
immunized
against
measles</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1, 9</td>
</tr>
<tr class="row-even"><td>19</td>
<td>MEDATT</td>
<td>Sought
medical
attention</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>CHWEIGHTK
G</td>
<td>Weight of
the child
(Kg)</td>
<td>IND</td>
<td>continuou
s</td>
<td>2 – 26.5</td>
</tr>
<tr class="row-even"><td>21</td>
<td>CHHEIGHTC
M</td>
<td>Height of
child
(cms)</td>
<td>IND</td>
<td>continuou
s</td>
<td>7 - 140</td>
</tr>
<tr class="row-odd"><td>22</td>
<td>ATSCHOOL</td>
<td>Currently
enrolled
in school</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>23</td>
<td>EDUCY</td>
<td>Highest
level of
education
attended</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>24</td>
<td>EDYEARS</td>
<td>Years of
education</td>
<td>IND</td>
<td>semi-cont
inuous</td>
<td>0-18</td>
</tr>
<tr class="row-even"><td>25</td>
<td>EDYRSCURR
AT</td>
<td>Years of
education
for
currently
enrolled</td>
<td>IND</td>
<td>semi-cont
inuous</td>
<td>1-18</td>
</tr>
<tr class="row-odd"><td>26</td>
<td>SCHTYP</td>
<td>Type of
school
attending</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-3, 9</td>
</tr>
<tr class="row-even"><td>27</td>
<td>LITERACY</td>
<td>Literacy</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-3</td>
</tr>
<tr class="row-odd"><td>28</td>
<td>EMPTYP1</td>
<td>Type of
employmen
t</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-9</td>
</tr>
<tr class="row-even"><td>29</td>
<td>UNEMP1</td>
<td>Unemploye
d</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>30</td>
<td>INDUSTRY1</td>
<td>Industry
classific
ation
(1-digit)</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-10</td>
</tr>
<tr class="row-even"><td>31</td>
<td>EMPCAT1</td>
<td>Employmen
t
categorie
s</td>
<td>IND</td>
<td>categoric
al</td>
<td>11, 12,
13, 14,
21, 22</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>WHOURSLAS
TWEEK1</td>
<td>Hours
worked
last week</td>
<td>IND</td>
<td>continuou
s</td>
<td>0-154</td>
</tr>
<tr class="row-even"><td>33</td>
<td>OWNHOUSE</td>
<td>Ownership
of
dwelling</td>
<td>HH</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>34</td>
<td>ROOF</td>
<td>Main
material
used for
roof</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-5, 9</td>
</tr>
<tr class="row-even"><td>35</td>
<td>TOILET</td>
<td>Main
toilet
facility</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-4, 9</td>
</tr>
<tr class="row-odd"><td>36</td>
<td>ELECTCON</td>
<td>Electrici
ty</td>
<td>HH</td>
<td>categoric
al</td>
<td>0-3</td>
</tr>
<tr class="row-even"><td>37</td>
<td>FUELCOOK</td>
<td>Main
cooking
fuel</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-5, 9</td>
</tr>
<tr class="row-odd"><td>38</td>
<td>WATER</td>
<td>Main
source of
water</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-9</td>
</tr>
<tr class="row-even"><td>39</td>
<td>OWNAGLAND</td>
<td>Ownership
of
agricultu
ral
land</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-3</td>
</tr>
<tr class="row-odd"><td>40</td>
<td>LANDSIZEH
A</td>
<td>Land size
owned by
household
(ha)
(agric
and non
agric)</td>
<td>HH</td>
<td>continuou
s</td>
<td>0-1214</td>
</tr>
<tr class="row-even"><td>41</td>
<td>OWNMOTORC
YCLE</td>
<td>Ownership
of
motorcycl
e</td>
<td>HH</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>42</td>
<td>CAR</td>
<td>Ownership
of car</td>
<td>HH</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>43</td>
<td>TV</td>
<td>Ownership
of
televisio
n</td>
<td>HH</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>44</td>
<td>LIFESTOCK</td>
<td>Number of
large-siz
ed
livestock
owned</td>
<td>HH</td>
<td>semi-cont
inuous</td>
<td>0-25</td>
</tr>
<tr class="row-even"><td>45</td>
<td>INCRMT</td>
<td>Income –
Remittanc
es</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>46</td>
<td>INCWAGE</td>
<td>Income -
Wages and
salaries</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>47</td>
<td>INCBONSOC
ALL</td>
<td>Income -
Bonuses
and
social
allowance
s
derived
from wage
jobs</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>48</td>
<td>INCFARMBS
N</td>
<td>Income -
Gross
income
from
household
farm
businesse
s</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>49</td>
<td>INCNFARMB
SN</td>
<td>Income
-Gross
income
from
household
nonfarm
businesse
s</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>50</td>
<td>INCRENT</td>
<td>Income -
Rent</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>51</td>
<td>INCFIN</td>
<td>Income -
Financial</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>52</td>
<td>INCPENSN</td>
<td>Income -
Pensions/
social
assistanc
e</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>53</td>
<td>INCOTHER</td>
<td>Income -
Other</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>54</td>
<td>INCTOTGRO
SSHH</td>
<td>Income -
Total</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>55</td>
<td>FARMEMP</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>56</td>
<td>TFOODEXP</td>
<td>Total
expenditu
re
on food</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>57</td>
<td>TALCHEXP</td>
<td>Total
expenditu
re
on
alcoholic
beverages
,
tobacco
and
narcotics</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>58</td>
<td>TCLTHEXP</td>
<td>Total
expenditu
re
on
clothing</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>59</td>
<td>THOUSEXP</td>
<td>Total
expenditu
re
on
housing</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>60</td>
<td>TFURNEXP</td>
<td>Total
expenditu
re
on
furnishin
g</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>61</td>
<td>THLTHEXP</td>
<td>Total
expenditu
re
on health</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>62</td>
<td>TTRANSEXP</td>
<td>Total
expenditu
re
on
transport</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>63</td>
<td>TCOMMEXP</td>
<td>Total
expenditu
re
on
communica
tion</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>TRECEXP</td>
<td>Total
expenditu
re
on
recreatio
n</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>65</td>
<td>TEDUEXP</td>
<td>Total
expenditu
re
on
education</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>66</td>
<td>TRESHOTEX
P</td>
<td>Total
expenditu
re
on
restauran
ts
and
hotels</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>67</td>
<td>TMISCEXP</td>
<td>Total
expenditu
re
on
miscellan
eous
spending</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>68</td>
<td>TANHHEXP</td>
<td>Total
annual
nominal
household
expenditu
res</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>It is always important to ensure that the relationships between
variables in the data are preserved during the anonymization process and
to explore and take note of these relationships before beginning the
anonymization. In the final step in the anonymization process, an audit
should be conducted, using these initial results, to check that these
relationships are maintained in the anonymized dataset.</p>
<p>In our demo dataset, we identify several relationships between variables
that need to be preserved during the anonymization process. The
variables TANHHEXP and INCTOTGROSSHH represent the total annual nominal
household expenditure and the total gross annual household income,
respectively, and these variables are aggregations of existing income
and expenditure components in the dataset.</p>
<p>The variables related to education are available only for individuals in
the appropriate age groups and missing for other individuals. We make a
similar observation for variables relating to children, such as height,
weight and age in months. In addition, the household-level variables
(cf. fourth column of Table 9.1) have the same values for all members in
any particular household. The value of household size corresponds to the
actual number of individuals belonging to that household in the dataset.
As we proceed, we have to take care that these relationships and
structures are preserved in the anonymization process.</p>
<p>When tabulating the variables, we notice that the variables RELIG,
EMPTYP1 and LIVESTOCK have missing value codes different from the <em>R</em>
standard missing value code NA. Before proceeding, we need to recode
these to NA so <em>R</em> interprets them correctly. The missing value codes
are resp. 99999, 99 and 9999 for these three variables. These are
genuine missing value codes and not caused by the variables being not
applicable to the individual. Example 9.5 shows how to make these
changes. <strong>NOTE: At the end of the anonymization process, and if desired
for users, it is relatively easy to change these values back to their
original missing value code.</strong></p>
<p>Example 9.5: Recoding missing value codes</p>
<p><em># Set different NA codes to R missing value NA</em></p>
<p>file[,’RELIG’][file[,’RELIG’] == 99999] &lt;- NA</p>
<div class="line-block">
<div class="line">file[,’EMPTYP1’][file[,’EMPTYP1’] == 99] &lt;- NA</div>
<div class="line">file[,’LIVESTOCK’][file[,’LIVESTOCK’] == 9999] &lt;- NA</div>
</div>
<p>We also take note that the variables LANGUAGE and ETHNICITY have only
missing values. Variables that contain only missing values should be
removed from the dataset at this stage and excluded from the
anonymization process. Removing these variables does not mean loss of
data or reduction of the data utility, since these variables did not
contain any information. It is, however, necessary to remove them,
because keeping them can lead to errors in some of the anonymization
methods in <em>R</em>. It is always possible to add these variables back into
the dataset to be released at the end of the anonymization process. It
is useful to reduce the dataset to those variables and records relevant
for the anonymization process. This guarantees the best results in <em>R</em>
and fewer errors. In Example 9.6 we drop the variables that contain all
missing values.</p>
<p>Example 9.6: Dropping variables with only missing values</p>
<div class="line-block">
<div class="line"><em># Drop variables containing only missings</em></div>
<div class="line">file &lt;- file[,!<strong>names</strong>(file) %in% <strong>c</strong>(‘LANGUAGE’,
‘ETHNICITY’)]</div>
</div>
<p>We assume that the data are collected in a survey that uses simple
sampling of households. The data contains two weight coefficients: WGTHH
and WGTPOP. The relationship between the weights is WGTPOP = WGTHH *
HHSIZE. WGTPOP is the sampling weight for the households and WGTHH is
the sampling weight for the individuals to be used for disclosure risk
calculations. WGTHH is used for computing individual-level indicators
(such as education) and WGTPOP is used for population level indicators
(such as income indicators). There are no strata variables available in
the data. We will use WGTPOP for the anonymization of the household
variables and WGTHH for the anonymization of the individual-level
variables.</p>
<p><strong>Step 3: Type of release</strong></p>
<p>In this case study, we assume that data will be released as a SUF, which
will be only available under license to accredited researchers with
approved research proposals (see Section 3.2 for more information of the
release of SUF). Therefore, the accepted risk level is higher and a
broader set of variables can be released than would be the case when
releasing a PUF. Since we do not have an overview of the requirements of
all users, we restrict the utility measures to a selected number of data
uses (see Step 5).</p>
<p><strong>Step 4: Intruder scenarios and choice of key variables</strong></p>
<p>Next, we analyze possible intruder scenarios and select
quasi-identifiers or key variables based on these scenarios. Since the
dataset used in this case study is a demo dataset that does not stem
from an existing country (and hence we do not have information on
external data sources available to possible intruders) and the original
data has already been anonymized, it is not possible to define exact
disclosure scenarios. Instead, we draft intruder scenarios for this demo
dataset based on some hypothetical assumptions about availability of
external data sources. We consider two types of disclosure scenarios: 1)
matching to other publicly available datasets and 2) spontaneous
recognition. The license under which the dataset will be distributed
(SUF) prohibits matching to external resources. Still this can happen.
However, the more important scenario is the one of spontaneous
recognition. We describe both scenarios in the following two paragraphs.</p>
<p>For the sake of illustration, we assume that population registers are
available with the demographic variables gender, age, place of residence
(region, urban/rural), religion and other variables such as marital
status and variables relating to education and professional status that
are also present in our dataset. In addition, we assume that there is a
publically available cadastral register on land ownership. Based on this
analysis of available data sources, we select the variables REGION,
URBRUR, HHSIZE, OWNAGLAND, RELIG, GENDER, REL (relationship to household
head), MARITAL (marital status), AGEYRS, INDUSTRY1 and two variables
relating to school attendance as categorical quasi-identifiers, the
expenditure and income variables as well as LANDSIZEHA as continuous
quasi-identifiers. According to our assessment, these variables might
enable an intruder to re-identify an individual or household in the
dataset by matching with other available datasets.</p>
<p>Table 9.2 gives an overview of the selected quasi-identifiers and their
levels of measurement.</p>
<p>The decision to release the dataset as a SUF means the level of
anonymization will be relatively low and consequently, the variables are
more detailed and a scenario of spontaneous recognition is our main
concern. Therefore, we should check for rare combinations or unusual
patterns in the variables. Variables that may lead to spontaneous
recognition in our sample are amongst others HHSIZE (household size),
LANDSIZEHA as well as income and expenditure variables. Large households
and large land ownership are easily identifiable. The same holds for
extreme outliers in wealth and expenditure variables, especially when
combined with other identifying variables such as region. There might be
only one or a few households in a certain region with a high income,
such as the local doctor. Variables that are easily observable and known
by neighbors such as ROOF, TOILET, WATER, ELECTCON, FUELCOOK,
OWNMOTORCYCLE, CAR, TV and LIVESTOCK may also need protection depending
on what stands out in the community, since a researcher might be able to
identify persons (s)he knows. This is called the nosy-neighbor scenario.</p>
<p>Table 9.2: List of selected quasi-identifiers</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Measurement</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>REGION (region)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-odd"><td>URBRUR (area of residence)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-even"><td>HHSIZE (household size)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-odd"><td>OWNAGLAND (agricultural land
ownership)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-even"><td>RELIG (religion of household
head)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-odd"><td>LANDSIZEHA (size of agr. and
non-agr. land)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>TANHHEXP (total expenditures)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-odd"><td>T***EXP (expenditures in category
***)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>INCTOTGROSSHH (total income)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-odd"><td>INC*** (income in category ***)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>GENDER (sex)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-odd"><td>REL (relationship to household
head)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-even"><td>MARITAL (marital status)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-odd"><td>AGEYRS (age in completed years)</td>
<td>Individual, semi-continuous</td>
</tr>
<tr class="row-even"><td>EDYRSCURATT (years of education
for currently enrolled)</td>
<td>Individual, semi-continuous</td>
</tr>
<tr class="row-odd"><td>EDUCY (highest level of education
completed)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-even"><td>ATSCHOOL (currently enrolled in
school)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-odd"><td>INDUSTRY1 (industry
classification)</td>
<td>Individual, categorical</td>
</tr>
</tbody>
</table>
<p><strong>Step 5: Data key uses and selection of utility measures</strong></p>
<p>In this case study, our aim is to create a SUF that provides sufficient
information for accredited researchers. We know that the primary use of
these data will be to evaluate indicators relating to income and
inequality. Examples are the GINI coefficient and indicators on what
share of income is spent on what type of expenditures. Furthermore, we
focus on some education indicators. Table 9.3 gives an overview of the
utility measures we selected. Besides these utility measures, which are
specific to the data uses, we also do standard checks, such as comparing
tabulations, cross-tabulations and summary statistics before and after
anonymization.</p>
<p>Table 9.3: Overview of selected utility measures</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Gini point estimates and confidence intervals for total expenditures</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Lorenz curves for total expenditures</td>
</tr>
<tr class="row-odd"><td>Mean monthly per capita total expenditures by area of residence</td>
</tr>
<tr class="row-even"><td>Average share of components for expenditures</td>
</tr>
<tr class="row-odd"><td>Mean monthly per capita total income by area of residence</td>
</tr>
<tr class="row-even"><td>Average share of components for income</td>
</tr>
<tr class="row-odd"><td>Net enrollment in primary education by gender</td>
</tr>
</tbody>
</table>
<p>There are no published figures and statistics available that are
calculated from this dataset because it is a demo. In general, the
published figures should be re-computed based on the anonymized dataset
and compared to the published figures in Step 11. Large differences
would reduce the credibility of the anonymized dataset.</p>
<p><strong>Hierarchical (household) structure</strong></p>
<p>Our demo survey collects data on individuals in households. The
household structure is important for data users and should be considered
in the risk assessment. Since some variables are measured on the
household level and thus have identical values for each household
member, the values of the household variables should be treated in the
same way for each household member (see Section 5.5). Therefore, we
first anonymize only the household variables. After this, we merge them
with the individual-level variables and then anonymize the
individual-level and household-level variables jointly.</p>
<p>Since the data has a hierarchical structure, Steps 6 through 10 are
repeated twice: Steps 6a through 10a are for the household-level
variables and Steps 6b through 10b for the combined dataset. In this
way, we ensure that household-level variable values remain consistent
across household members for each household and the household structure
cannot be used to re-identify individuals. This is further explained in
Sections 4.4 and 7.6.</p>
<p>Before continuing to Step 6a, we select the categorical key variables,
continuous key variables and any variables selected for use in PRAM
routines, as well as household-level sampling weights. We extract these
selected household variables and the households from the dataset and
save them as <em>fileHH</em>. The choice of PRAM variables is further explained
in Step 8a. Example 9.7 illustrates how these steps are done in <em>R</em> (see
also Section 7.6). <strong>NOTE: In our dataset, some of the categorical
variables when imported from the STATA file were not imported as
factors. sdcMicro requires that these be converted to factors before
proceeding.</strong> Conversion of these variables to factors is also shown in
Example 9.7.</p>
<p>Example 9.7: Selecting the variables for the household-level
anonymization</p>
<div class="line-block">
<div class="line">### Select variables (household level)</div>
<div class="line"><em># Key variables (household level)</em></div>
<div class="line">selectedKeyVarsHH = <strong>c</strong>(‘URBRUR’, ‘REGION’, ‘HHSIZE’, ‘OWNHOUSE’,
‘OWNAGLAND’, ‘RELIG’)</div>
</div>
<p><em># Changing variables to class factor</em></p>
<p>file$URBRUR &lt;- <strong>as.factor</strong>(file$URBRUR)</p>
<p>file$REGION &lt;- <strong>as.factor</strong>(file$REGION)</p>
<p>file$OWNHOUSE &lt;- <strong>as.factor</strong>(file$OWNHOUSE)</p>
<p>file$OWNAGLAND &lt;- <strong>as.factor</strong>(file$OWNAGLAND)</p>
<p>file$RELIG &lt;- <strong>as.factor</strong>(file$RELIG)</p>
<div class="line-block">
<div class="line"><em># Numerical variables</em></div>
<div class="line">numVarsHH = <strong>c</strong>(‘LANDSIZEHA’, ‘TANHHEXP’, ‘TFOODEXP’, ‘TALCHEXP’,
‘TCLTHEXP’, ‘THOUSEXP’, ‘TFURNEXP’, ‘THLTHEXP’, ‘TTRANSEXP’,
‘TCOMMEXP’, ‘TRECEXP’, ‘TEDUEXP’, ‘TRESHOTEXP’, ‘TMISCEXP’,
‘INCTOTGROSSHH’, ‘INCRMT’, ‘INCWAGE’, ‘INCFARMBSN’, ‘INCNFARMBSN’,
‘INCRENT’, ‘INCFIN’, ‘INCPENSN’, ‘INCOTHER’)</div>
<div class="line"><em># PRAM variables</em></div>
<div class="line">pramVarsHH = <strong>c</strong>(‘ROOF’, ‘TOILET’, ‘WATER’, ‘ELECTCON’,
‘FUELCOOK’, ‘OWNMOTORCYCLE’, ‘CAR’, ‘TV’, ‘LIVESTOCK’)</div>
</div>
<div class="line-block">
<div class="line"><em># sample weight (WGTPOP) (household)</em></div>
<div class="line">weightVarHH = <strong>c</strong>(‘WGTPOP’)</div>
<div class="line"><em># All household level variables</em></div>
<div class="line">HHVars &lt;- <strong>c</strong>(‘HID’, selectedKeyVarsHH, pramVarsHH, numVarsHH,
weightVarHH)</div>
</div>
<p>We then extract these variables from <em>file</em>, the dataframe in <em>R</em> that
contains all variables. Every household has the same number of entries
as it has members (e.g., a household of three will be repeated three
times in <em>fileHH</em>). Before analyzing the household-level variables, we
select only one entry per household, as illustrated in Example 9.8. This
is further explained in Section 7.6.</p>
<p>Example 9.8: Taking a subset with only households</p>
<div class="line-block">
<div class="line"><em># Create subset of file with households and HH variables</em></div>
<div class="line">fileHH &lt;- file[,HHVars]</div>
</div>
<div class="line-block">
<div class="line"><em># Remove duplicated rows based on IDH, select uniques, one row per
household in fileHH</em></div>
<div class="line">fileHH &lt;- fileHH[which(!duplicated(fileHH$IDH)),]</div>
</div>
<p><strong>dim</strong>(fileHH)</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">2000</span>&#160;&#160; <span class="pre">39</span></code></p>
<p>The file <em>fileHH</em> contains 2,000 households and 39 variables. We are now
ready to create our <em>sdcMicro</em> object with the corresponding variables
we selected in Example 9.7. For our case study, we will create an
<em>sdcMicro</em> object called <em>sdcHH</em> based on the data in <em>fileHH</em>, which we
will use for steps 6a – 10a (see Example 9.9). <strong>NOTE: When the sdcMicro
object is created, the sdcMicro package automatically calculates and
stores the risk measures for the data.</strong> This leads us to Step 6a.</p>
<p>Example 9.9: Creating a <em>sdcMicro</em> object for the household variables</p>
<div class="line-block">
<div class="line"><em># Create initial SDC object for household level variables</em></div>
<div class="line">sdcHH &lt;- <strong>createSdcObj</strong>(dat = fileHH, keyVars = selectedKeyVarsHH,
pramVars = pramVarsHH,</div>
</div>
<p>weightVar = weightVarHH, numVars = numVarsHH)</p>
<p>numHH &lt;- <strong>length</strong>(fileHH[,1]) <em># number of households</em></p>
<p><strong>Step 6a: Assessing disclosure risk (household level)</strong></p>
<p>As a first measure, we evaluate the number of households violating
k-anonymity at the levels 2, 3 and 5.</p>
<p>Table 9.4 shows the number of violating households as well as the
percentage of the total number of households. Example 9.10 illustrates
how to find these values with <em>sdcMicro</em>. The print() function in
<em>sdcMicro</em> shows only the values for thresholds 2 and 3. Values for
other thresholds can be calculated manually by summing up the
frequencies smaller than the k-anonymity threshold, as shown in Example
9.10.</p>
<p>Table 9.4: Number and proportion of households violating k-anonymity</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>k-anonymity level</strong></th>
<th class="head"><strong>Number of HH
violating</strong></th>
<th class="head"><strong>Percentage of total
number of HH</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>103</td>
<td>5.15 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>229</td>
<td>11.45 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>489</td>
<td>24.45 %</td>
</tr>
</tbody>
</table>
<p>Example 9.10: Showing number of households violating k-anonymity for
levels 2,3 and 5</p>
<div class="line-block">
<div class="line"><em># Number of observations violating k-anonymity (thresholds 2 and 3)</em></div>
<div class="line"><strong>print</strong>(sdcHH)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Infos</span> <span class="pre">on</span> <span class="pre">2/3-Anonymity:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">violating</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">2-anonymity:</span> <span class="pre">103</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">3-anonymity:</span> <span class="pre">229</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Percentage</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">violating</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">2-anonymity:</span> <span class="pre">5.150</span> <span class="pre">%</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">3-anonymity:</span> <span class="pre">11.450</span> <span class="pre">%</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">--------------------------------------------------------------------------</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Calculate sample frequencies and count number of obs. violating k
(5) - anonymity</em></div>
<div class="line">kAnon5 &lt;- <strong>sum</strong>(sdcHH&#64;risk$individual[,2] &lt; 5)</div>
</div>
<p>kAnon5</p>
<p>## [1] 489</p>
<div class="line-block">
<div class="line"><em># As percentage of total</em></div>
<div class="line">kAnon5 / numHH</div>
</div>
<p>## [1] 0.2445</p>
<p>It is often useful to view the values for the household(s) that violate
k-anonymity. This might help clarify which variables cause the
uniqueness of these households; this can then be used later when
choosing appropriate SDC methods. Example 9.11 shows how to assess the
values of the households violating 3 and 5-anonymity. It seems that
among the categorical key variables, the variable HHSIZE is responsible
for many of the unique combinations and the origin of much of the risk.
Having determined this, we can flag HHSIZE as a possible first variable
to treat to obtain the required risk level. In practice, with a variable
like HHSIZE, this will likely involve removing large households from the
dataset to be released. As explained in Section 5.5, recoding and local
suppression are no valid options for the variable HHSIZE. The
frequencies of household size in Table 9.7 on page 132 show that there
are few households with more than 13 household members. This makes these
households easily identifiable based on the number of household members
and at high risk of re-identification, also in the context of the nosy
neighbor scenario.</p>
<p>Example 9.11: Showing households that violate k-anonymity</p>
<div class="line-block">
<div class="line"><em># Show values of key variable of records that violate k-anonymity</em></div>
<div class="line">fileHH[sdcHH&#64;risk$individual[,2] &lt; 3, selectedKeyVarsHH] <em># for
3-anonymity</em></div>
</div>
<p>fileHH[sdcHH&#64;risk$individual[,2] &lt; 5, selectedKeyVarsHH] <em># for
5-anonymity</em></p>
<p>We also assess the disclosure risk of the categorical variables with the
individual and global risk measures as described in Sections 4.5 and
4.8. In <em>fileHH</em> every entry represents a household. Therefore, we use
the individual non-hierarchical risk here, where the individual refers
in this case to a household. <em>fileHH</em> contains only households and has
no hierarchical structure. In Step 6b, we evaluate the hierarchical risk
in <em>file</em>, the dataset containing both households and individuals. The
individual and global risk measures automatically take into
consideration the household weights, which we defined in Example 9.7. In
our file, the global risk measure calculated using the chosen key
variables is 0.05%. This percentage is extremely low and corresponds to
1.03 expected re-identifications. The results are also shown in Example
9.12. This low figure can be explained by the relatively small sample
size of 0.25% of the total population. Furthermore, one should keep in
mind that this risk measure is based only on the categorical
quasi-identifiers at the household level. Example 9.12 illustrates how
to print the global risk measure.</p>
<p>Example 9.12: Printing global risk measures</p>
<p><strong>print</strong>(sdcHH, “risk”)</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Risk</span> <span class="pre">measures:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">with</span> <span class="pre">higher</span> <span class="pre">risk</span> <span class="pre">than</span> <span class="pre">the</span> <span class="pre">main</span> <span class="pre">part</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data:</span> <span class="pre">0</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Expected</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">re-identifications:</span> <span class="pre">1.03</span> <span class="pre">(0.05</span> <span class="pre">%)</span></code></div>
</div>
<p>The global risk measure does not provide information about the spread of
the individual risk measures. There might be a few households with
relatively high risk, while the global (average) risk is low. It is
therefore useful as a next step to inspect the observations with
relatively high risk. The highest risk is 5.5% and only 14 households
have risk larger than 1%. Example 9.13 shows how to display those
households with risk over a certain threshold. Here the threshold is
0.01 (1%).</p>
<p>Example 9.13: Observations with individual risk higher than 1%</p>
<div class="line-block">
<div class="line"><em># Observations with risk above certain threshold (0.01)</em></div>
<div class="line">fileHH[sdcHH&#64;risk$individual[, “risk”] &gt; 0.01,]</div>
</div>
<p>Since the selected key variables at the household level are both
categorical and numerical, the individual and global risk measures based
on frequency counts do not completely reflect the disclosure risk of the
entire dataset. Both categorical and continuous key variables are
important for the data users, thus options like recoding the continuous
variables (e.g., by creating quantiles of income and expenditure
variables) to make all of them categorical will likely not satisfy the
data user’s needs. We therefore avoid recoding continuous variables and
assess the disclosure risk of the categorical and continuous variables
separately. This approach can be partly justified by the fact that any
potential matching to external data sources for the continuous and
categorical variables are available from different external data sources
and as such will not be used simultaneously for matching.</p>
<p><strong>Continuous variables</strong></p>
<p>To measure the risk of the continuous variables, we use an interval
measure, which measures the number of anonymized values that are too
close to their original values. See Section 4.7.2 for more information
on interval-based risk measures for continuous variables. This measure
is an ex-post measure, meaning that the risk can be evaluated only after
anonymization and measures whether the perturbation is sufficiently
large. Since it is an ex-post measure, we can evaluate it only in Step
9a after the variables have been treated. Evaluating this measure based
on the original data would lead to a risk of 100%; all values would be
too close to the original values since they would coincide with the
original values, no matter how small the chosen intervals would be.</p>
<p>We also look at the distribution of LANDSIZEHA. In the variable
LANDSIZEHA high values are rare and can lead to re-identification. An
example is a large landowner in a specific region. To evaluate the
distribution of the variable LANDSIZEHA, we look at the percentiles.
Every percentile represents approximately 20 households. In addition, we
look at the values of the largest 50 plots. Example 9.14 shows how to
use <em>R</em> to display the quantiles and the largest landplots. Table 9.5
shows the 90<sup>th</sup> – 100<sup>th</sup> percentiles and Table 9.6
displays the largest 50 values for LANDSIZEHA. Based on these values, we
conclude that values of LANDSIZEHA over 40 make the household very
identifiable. These large households and households with large land
plots need extra protection, as discussed in Step 8a.</p>
<p>Example 9.14 Percentiles of LANDSIZE and listing the sizes of the
largest 50 plots</p>
<div class="line-block">
<div class="line"><em># 1st - 100th percentiles of land size</em></div>
<div class="line"><strong>quantile</strong>(fileHH$LANDSIZEHA, probs = (1:100)/100, na.rm= TRUE)</div>
</div>
<div class="line-block">
<div class="line"><em># Values of landsize for largest 50 plots</em></div>
<div class="line"><strong>tail</strong>(<strong>sort</strong>(fileHH$LANDSIZEHA), n = 50)</div>
</div>
<p>Table 9.5: Percentiles 90-100 of the variable LANDSIZE</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="13%" />
<col width="16%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Percentile</strong></th>
<th class="head">90</th>
<th class="head">91</th>
<th class="head">92</th>
<th class="head">93</th>
<th class="head">94</th>
<th class="head">95</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Value</strong></td>
<td>6.00</td>
<td>8.00</td>
<td>8.09</td>
<td>10.12</td>
<td>10.12</td>
<td>10.12</td>
</tr>
<tr class="row-odd"><td><strong>Percentile</strong></td>
<td>96</td>
<td>97</td>
<td>98</td>
<td>99</td>
<td>100</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>Value</strong></td>
<td>12.14</td>
<td>20.23</td>
<td>33.83</td>
<td>121.41</td>
<td>1,214.08</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Table 9.6: 50 largest values of the variable LANDSIZE</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">12.14</th>
<th class="head">15.00</th>
<th class="head">15.37</th>
<th class="head">15.78</th>
<th class="head">16.19</th>
<th class="head">20.00</th>
<th class="head">20.23</th>
<th class="head">20.23</th>
<th class="head">20.23</th>
<th class="head">20.23</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
</tr>
<tr class="row-odd"><td>20.23</td>
<td>20.23</td>
<td>20.50</td>
<td>30.35</td>
<td>32.38</td>
<td>40.47</td>
<td>40.47</td>
<td>40.47</td>
<td>40.47</td>
<td>40.47</td>
</tr>
<tr class="row-even"><td>40.47</td>
<td>40.47</td>
<td>80.93</td>
<td>80.93</td>
<td>80.93</td>
<td>80.93</td>
<td>121.41</td>
<td>121.41</td>
<td>161.88</td>
<td>161.88</td>
</tr>
<tr class="row-odd"><td>161.88</td>
<td>182.11</td>
<td>246.86</td>
<td>263.05</td>
<td>283.29</td>
<td>404.69</td>
<td>404.69</td>
<td>607.04</td>
<td>809.39</td>
<td>1214.08</td>
</tr>
</tbody>
</table>
<p><strong>Step 7a: Assessing utility measures (household level)</strong></p>
<p>The utility of the data does not only depend on the household level
variables, but on the combination of household-level and
individual-level variables. Therefore, it is not useful to evaluate all
the utility measures selected in Step 5 at this stage, i.e., before
anonymizing the individual level variables. We restrict the initial
measurement of utility to those measures that are solely based on the
household variables. In our dataset, these are the measures related to
income and expenditure and their distributions. The results are
presented in Step 10a, together with the results after anonymization,
which allow direct comparison. If after the next anonymization step it
appears that the data utility has been significantly decreased by the
suppression of some household level variables, we can return to this
step.</p>
<p><strong>Step 8a: Choice and application of SDC methods (household variables)</strong></p>
<p>This step is divided into the anonymization of the variable HHSIZE, as
this is a special case, the anonymization of the other selected
categorical quasi-identifiers and the anonymization of the selected
continuous quasi-identifiers.</p>
<p><strong>Variable HHSIZE</strong></p>
<p>The variable HHSIZE poses a problem for the anonymization of the file,
since suppressing it will not anonymize this variable: a simple
headcount based on the household ID would allow the reconstruction of
this variable. Table 9.7 shows the absolute frequencies of HHSIZE. The
number of households for each size larger than 13 is 6 or fewer and can
be considered outliers with a higher risk of re-identification, as
discussed in Step 6a. One way to deal with this is to remove all
households of size 14 or larger from the dataset <a class="footnote-reference" href="#foot71" id="id1">[1]</a>.
Removing 29 households of size 14 or larger reduces the number of
2-anonymity violations by 18, of 3-anonymity violations by 26 and of
5-anonymity violations by 29. This means that all removed households
violated 5-anonymity due to the value of the variable HHSIZE and many of
them 2- or 3-anonymity. In addition, the average individual risk amongst
the 29 households is 0.15%, which is almost three times higher than the
average individual risk of all households. The impact on the global risk
measure of removing these 29 households is, however, limited, due to the
relatively small number of removed households in comparison to the total
number of 2,000 households. Removing the households is primarily to
protect these specific households, not to reduce the global risk.
<strong>NOTE: When using sdcMicro and manually removing households, the
sdcMicro object should be recreated based on the new, manually edited
dataset.</strong> Changes, such as removing records, cannot be done in the
<em>sdcMicro</em> object. Example 9.15 illustrates the way to remove households
and recreate the <em>sdcMicro</em> object.</p>
<p>Table 9.7: Frequencies of variable HHSIZE (household size)</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>HHSIZE</strong></th>
<th class="head">1</th>
<th class="head">2</th>
<th class="head">3</th>
<th class="head">4</th>
<th class="head">5</th>
<th class="head">6</th>
<th class="head">7</th>
<th class="head">8</th>
<th class="head">9</th>
<th class="head">10</th>
<th class="head">11</th>
<th class="head">12</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Frequency</strong></td>
<td>152</td>
<td>194</td>
<td>238</td>
<td>295</td>
<td>276</td>
<td>252</td>
<td>214</td>
<td>134</td>
<td>84</td>
<td>66</td>
<td>34</td>
<td>21</td>
</tr>
<tr class="row-odd"><td><strong>HHSIZE</strong></td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
<td>21</td>
<td>22</td>
<td>33</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>Frequency</strong></td>
<td>11</td>
<td>6</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Example 9.15: Removing households with large (rare) household sizes</p>
<div class="line-block">
<div class="line"><em># Tabulation of variable HHSIZE</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipKeyVars$HHSIZE">sdcHH<span>&#64;</span>manipKeyVars$HHSIZE</a>)</div>
</div>
<div class="line-block">
<div class="line"><em># Remove large households (14 or more household members) from file
and fileHH</em></div>
<div class="line">file &lt;- file[!file[,’HHSIZE’] &gt;= 14,]</div>
</div>
<p>fileHHnew &lt;- fileHH[!fileHH[,’HHSIZE’] &gt;= 14,]</p>
<div class="line-block">
<div class="line"><em># Create new sdcMicro object based on the file without the removed
households</em></div>
<div class="line">sdcHH &lt;- <strong>createSdcObj</strong>(dat=fileHHnew, keyVars=selectedKeyVarsHH,
pramVars=pramVarsHH, weightVar=weightVarHH, numVars = numVarsHH)</div>
</div>
<p><strong>Categorical variables</strong></p>
<p>We are now ready to move on to the choice of SDC methods for the
categorical variables on the household level in our dataset. As noted in
our discussion of the methods, applying perturbative methods and local
suppression may lead to large loss of utility. The common approach is to
apply recoding to the largest possible extent as a first approach, to
reach a prescribed level of risk and reduce the number of suppressions
needed. Only after that should methods such as local suppression be
applied. If this approach does not already achieve the desired result,
we can consider perturbative methods.</p>
<p>Since the file is to be released as a SUF, we can keep a higher level of
detail in the data. The selected categorical key variables at the
household level are not suitable for recoding at this point. Due to the
relatively low risk of re-identification based on the five selected
categorical household level variables, it is possible in this case to
use an option like local suppression to achieve our desired level of
risk. Applying local suppression when initial risk is relatively low
will likely only lead to suppression of few observations and thus limit
the loss of utility. If, however, the data had been measured to have a
relatively high risk, then applying local suppression without previous
recoding would likely result in a large number of suppressions and
greater information loss. Efforts such a recoding should be taken first
before suppressing in cases where risk is initially measured as high.
Recoding will reduce risk with little information loss and thus the
number of suppressions, if local suppression is applied as an additional
step. We apply local suppression to reach 2-anonymity. The choice of the
low level of two is based on the overall low re-identification risk due
to the high sample weights and the release as SUF. High sample weights
mean, ceteris paribus, a low level of re-identification risk. Achieving
2-anonymity is the same as removing sample uniques. This leads to 42
suppressions in the variable HHSIZE and 4 suppressions in the variable
REGION. As explained earlier, suppression of the value of the variable
HHSIZE does not lead to actual suppression of this information.
Therefore, we redo the local suppression, but this time we tell
<em>sdcMicro</em> to, if possible, not suppress HHSIZE but one of the other
variables.</p>
<p>In <em>sdcMicro</em> it is possible to tell the algorithm which variables are
important and less important for making small changes (see also Section
5.2.2). To prevent HHSIZE being suppressed, we set the importance of
HHSIZE in the importance vectors to the highest (i.e., 1). Example 9.16
shows how to apply local suppression and put importance on the variable
HHSIZE. The variable REGION is the type of variable that should not have
any suppressions either. We also set the importance of REGION to 2 and
the importance of RURURB to 3. This leads to an order of the variables
to be considered for suppression by the algorithm. Instead of 42
suppressions in the variable HHSIZE, this leads one suppressed value in
the variable HHSIZE, and to 6, 1, 48 and 16 suppressions respectively
for the variables URBRUR, REGION, OWNAGLAND and RELIG (which we set as
less important). The importance is clearly reflected in the number of
suppression. The total number of suppressions is higher than without
importance vector (71 vs. 46), but 2-anonymity is achieved in the
dataset with fewer suppressions in the variables HHSIZE and REGION. We
remove the one household with the suppressed value of HHSIZE (13) to
protect this household. <strong>NOTE: In</strong> Example 9.16 <strong>we use the
undolast() function in sdcMicro to go one step back after we had first
applied local suppression with no importance vector.</strong> The undolast()
function restores the <em>sdcMicro</em> object back to the previous state
(i.e., before we applied local suppression), which allows us to rerun
the same command, but this time with an importance vector set. The
undolast() function can only be used to go one step back.</p>
<p>Example 9.16: Local suppression with and without importance vector</p>
<div class="line-block">
<div class="line"><em># Local suppression</em></div>
<div class="line">sdcHH &lt;- <strong>localSuppression</strong>(sdcHH, k=2, importance = NULL) <em># no
importance vector</em></div>
</div>
<p><strong>print</strong>(sdcHH, “ls”)</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">URBRUR</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">REGION</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">4</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.203</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">HHSIZE</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">37</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">1.877</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">OWNAGLAND</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">RELIG</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
</div>
<p>sdcHH &lt;- <strong>undolast</strong>(sdcHH)</p>
<p>sdcHH &lt;- <strong>localSuppression</strong>(sdcHH, k=2, importance = <strong>c</strong>(3, 2,
1, 5, 5)) <em># importance on HHSIZE (1), REGION (2) and URBRUR (3)</em></p>
<p><strong>print</strong>(sdcHH, “ls”)</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">URBRUR</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">6</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.304</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">REGION</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">1</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.051</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">HHSIZE</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">1</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.051</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">OWNAGLAND</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">43</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">2.182</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">RELIG</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">16</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.812</span></code></div>
</div>
<p>The variables ROOF, TOILET, WATER, ELECTCON, FUELCOOK, OWNMOTORCYCLE,
CAR, TV and LIVESTOCK are not sensitive variables and were not selected
as quasi-identifiers because we assumed that there are no external data
sources containing this information that could be used for matching.
Values can be easily observed or be known to neighbors, however, and
therefore are important, together with other variables, for the
spontaneous recognition scenario and nosy neighbor scenario. To
anonymize these variables, we want to introduce a low level of
uncertainty in them. Therefore, we decide to use invariant PRAM for the
variables ROOF, TOILET, WATER, ELECTCON, FUELCOOK, OWNMOTORCYCLE, CAR,
TV and LIVESTOCK, where we treat LIVESTOCK as a semi-continuous variable
due to the low number of different values. Section 5.3.1 provides more
information on the PRAM method and its implementation in <em>sdcMicro</em>.
Example 9.17 illustrates how to apply PRAM. We choose the parameter
<em>pd</em>, the lower bound for the probability that a value is not changed,
to be relatively high at 0.8. We can choose a high value, because the
variables themselves are not sensitive and we only want to introduce a
low level of changes to minimize the utility loss. Because the
distribution of many of the variables chosen for PRAM depends on the
REGION, we decide to use the variable REGION as a strata variable. In
this way the transition matrix is computed for each region separately.
Because PRAM is a probabilistic method, we set a seed for the random
number generator before applying PRAM to ensure reproducibility of the
results. <strong>NOTE: In practice, it is not advisable to set a seed of
12345, but rather a longer more complex and less easy to guess
sequence.</strong> The seed should not be released, since it allows for
reconstructing the original values if combined with the transition
matrix. The transition matrix can be released: this allows for
consistent statistical inference by correcting the statistical methods
used if the researcher has knowledge about the PRAM method (at this
point <em>sdcMicro</em> does not allow the retrieval of the transition matrix).</p>
<p>Example 9.17: Applying PRAM</p>
<div class="line-block">
<div class="line"><em># Pram</em></div>
<div class="line"><strong>set.seed</strong>(12345)</div>
<div class="line">sdcHH &lt;- <strong>pram</strong>(sdcHH, strata_variables = “REGION”, pd = 0.8)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">changed</span> <span class="pre">observations:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">ROOF</span> <span class="pre">!=</span> <span class="pre">ROOF_pram</span> <span class="pre">:</span> <span class="pre">98</span> <span class="pre">(4.97%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">TOILET</span> <span class="pre">!=</span> <span class="pre">TOILET_pram</span> <span class="pre">:</span> <span class="pre">151</span> <span class="pre">(7.66%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">WATER</span> <span class="pre">!=</span> <span class="pre">WATER_pram</span> <span class="pre">:</span> <span class="pre">167</span> <span class="pre">(8.47%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">ELECTCON</span> <span class="pre">!=</span> <span class="pre">ELECTCON_pram</span> <span class="pre">:</span> <span class="pre">90</span> <span class="pre">(4.57%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">FUELCOOK</span> <span class="pre">!=</span> <span class="pre">FUELCOOK_pram</span> <span class="pre">:</span> <span class="pre">113</span> <span class="pre">(5.73%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">OWNMOTORCYCLE</span> <span class="pre">!=</span> <span class="pre">OWNMOTORCYCLE_pram</span> <span class="pre">:</span> <span class="pre">41</span> <span class="pre">(2.08%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">CAR</span> <span class="pre">!=</span> <span class="pre">CAR_pram</span> <span class="pre">:</span> <span class="pre">172</span> <span class="pre">(8.73%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">TV</span> <span class="pre">!=</span> <span class="pre">TV_pram</span> <span class="pre">:</span> <span class="pre">137</span> <span class="pre">(6.95%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">LIVESTOCK</span> <span class="pre">!=</span> <span class="pre">LIVESTOCK_pram</span> <span class="pre">:</span> <span class="pre">149</span> <span class="pre">(7.56%)</span></code></div>
</div>
<p>PRAM has changed values within the variables according to the invariant
transition matrices. Since we used the invariant PRAM method (see
Section 5.3.1), the absolute univariate frequencies remain unchanged.
This is not the case for the multivariate frequencies. In Step 10a we
compare the changes in the multivariate frequencies for the PRAMmed
variables.</p>
<p><strong>Continuous variables</strong></p>
<p>We have selected income and expenditures variables and the variable
LANDSIZEHA as numerical quasi-identifiers, as discussed in Step 4. In
Step 5 we identified variables having high interest for the users of our
data: many users use the data for measuring inequality and expenditure
patterns.</p>
<p>Based on the risk evaluation in Step 6a, we decide to anonymize the
variable LANDSIZEHA by top coding at the value 40 (cf. Table 9.5 and
Table 9.6) and round values smaller than 1 to one digit, and values
larger than 1 to zero digits. Rounding the values prevents exact
matching with the available cadastral register. Furthermore, we group
the values between 5 and 40 in the groups 5 – 19 and 20 – 39. After
these steps, no household has a unique plot size and the number of
households in the sample with the same plot size was increased to at
least 7. This is shown by the tabulation of the variable LANDSIZEHA
after manipulation in the last line of Example 9.18. In addition, all
outliers have been removed by top coding the values. This has reduced
the risk of spontaneous recognition as discussed in Step 6. How to
recode values in <em>R</em> is introduced in Section 5.2.1 and, for this
particular case, shown in Example 9.18.</p>
<p>Example 9.18: Anonymizing the variable LANDSIZEHA</p>
<div class="line-block">
<div class="line"><em># Rounding values of LANDSIZEHA to 1 digit for plots smaller than 1
and to 0 digits for plots larger than 1</em></div>
<div class="line">sdcHH&#64;manipNumVars$LANDSIZEHA[<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a> &lt;= 1 &amp;
!<strong>is.na</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>)] &lt;-
<strong>round</strong>(sdcHH&#64;manipNumVars$LANDSIZEHA[<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>
&lt;= 1 &amp; !<strong>is.na</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>)], digits = 1)</div>
</div>
<p>sdcHH&#64;manipNumVars$LANDSIZEHA[<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a> &gt; 1 &amp;
!<strong>is.na</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>)] &lt;-
<strong>round</strong>(sdcHH&#64;manipNumVars$LANDSIZEHA[<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>
&gt; 1 &amp; !<strong>is.na</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>)], digits = 0)</p>
<div class="line-block">
<div class="line"><em># Grouping values of LANDSIZEHA into intervals 5-19, 20-39</em></div>
<div class="line">sdcHH&#64;manipNumVars$LANDSIZEHA[<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a> &gt;= 5 &amp;
<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a> &lt; 20 &amp;
!<strong>is.na</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>)] &lt;- 13</div>
</div>
<p>sdcHH&#64;manipNumVars$LANDSIZEHA[<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a> &gt;= 20 &amp;
<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a> &lt; 40 &amp;
!<strong>is.na</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>)] &lt;- 30</p>
<div class="line-block">
<div class="line"><em># Topcoding values of LANDSIZEHA larger than 40 (also recomputes risk
after manual changes)</em></div>
<div class="line">sdcHH &lt;- <strong>topBotCoding</strong>(sdcHH, value = 40, replacement = 40, kind
= ‘top’, column = ‘LANDSIZEHA’)</div>
</div>
<div class="line-block">
<div class="line"><em># Results for LANDSIZEHA</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$LANDSIZEHA">sdcHH<span>&#64;</span>manipNumVars$LANDSIZEHA</a>)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160; <span class="pre">0</span> <span class="pre">0.1</span> <span class="pre">0.2</span> <span class="pre">0.3</span> <span class="pre">0.4</span> <span class="pre">0.5</span> <span class="pre">0.6</span> <span class="pre">0.7</span> <span class="pre">0.8</span> <span class="pre">0.9</span>&#160;&#160; <span class="pre">1</span>&#160;&#160; <span class="pre">2</span>&#160;&#160; <span class="pre">3</span>&#160;&#160; <span class="pre">4</span>&#160; <span class="pre">13</span>&#160; <span class="pre">30</span>&#160; <span class="pre">40</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">188</span> <span class="pre">109</span>&#160; <span class="pre">55</span>&#160; <span class="pre">30</span>&#160; <span class="pre">24</span>&#160; <span class="pre">65</span>&#160; <span class="pre">22</span>&#160;&#160; <span class="pre">7</span>&#160; <span class="pre">31</span>&#160; <span class="pre">16</span> <span class="pre">154</span> <span class="pre">258</span>&#160; <span class="pre">53</span>&#160; <span class="pre">60</span> <span class="pre">113</span>&#160; <span class="pre">18</span>&#160; <span class="pre">25</span></code></div>
</div>
<p>For the expenditure and income variables we compared, <strong>based on the
actual case study data</strong>, several methods. As mentioned earlier, the
main use of the data is to compute inequality measures, such as the Gini
coefficient. Recoding these variables into percentiles creates
difficulties computing these measures or changes these measures to a
large extent and is hence not a suitable method. Often, income and
expenditure variables that are released in a SUF are anonymized by
top-coding. This protects the outliers, which are the values that are
the most at risk. Top-coding, however, destroys the inequality
information in the data, by removing high (and low) incomes. Therefore,
we decide to use noise addition. To take into account the higher risk of
outliers, we add a higher level of noise to those.</p>
<p>Adding noise can lead to a transformation of the shape of the
distribution. Depending on the magnitude of the noise (see Section 5.3.3
for the definition of the magnitude of noise), the values of income can
also become negative. One way to solve this would be to cut off the
values below zero and set them to zero. This would, however, destroy the
properties conserved by noise addition (amongst others the value of the
expected mean, see also Section 5.3.3) and we chose to keep the negative
values.</p>
<p>As mentioned before, the aggregates of income and expenditures are the
sums of the components. Adding noise to each of the components might
lead to violation of this condition. Therefore, one solution is to add
noise to the aggregates and remove the components. We prefer to keep the
components in the data and apply noise addition to each component
separately. This allows to apply a lower level of noise than when
applying noise only to the aggregates. A noise level of 0.01 seems to be
sufficient with extra noise of 0.05 added to the outliers. The outliers
are defined by a robust Mahalanobis distance (see Section 5.3.3). After
adding noise to the components, we recomputed the aggregates as the sum
of the perturbed components. <strong>NOTE: This result is only based on the
actual case study dataset and is not necessarily true for other
datasets.</strong> The noise addition is shown in Example 9.19. Before applying
probabilistic methods such as noise addition, we set a seed for the
random number generator. This allows us to reproduce the results.</p>
<p>Example 9.19: Anonymizing continuous variables</p>
<p><em># Add noise to income and expenditure variables by category</em></p>
<div class="line-block">
<div class="line"><em># Anonymize components</em></div>
<div class="line">compExp &lt;- <strong>c</strong>(“TFOODEXP”, “TALCHEXP”, “TCLTHEXP”, “THOUSEXP”,
“TFURNEXP”, “THLTHEXP”, “TTRANSEXP”, “TCOMMEXP”, “TRECEXP”, “TEDUEXP”,
“TRESHOTEXP”, “TMISCEXP”)</div>
<div class="line"><strong>set.seed</strong>(123)</div>
</div>
<p><em># Add noise to expenditure variables</em></p>
<p>sdcHH &lt;- <strong>addNoise</strong>(noise = 0.01, obj = sdcHH, variables = compExp,
method = “additive”)</p>
<p><em># Add noise to outliers</em></p>
<p>sdcHH &lt;- <strong>addNoise</strong>(noise = 0.05, obj = sdcHH, variables = compExp,
method = “outdect”)</p>
<p><em># Sum over expenditure categories to obtain consistent totals</em></p>
<p>sdcHH&#64;manipNumVars[,’TANHHEXP’] &lt;-
<strong>rowSums</strong>(sdcHH&#64;manipNumVars[,compExp])</p>
<div class="line-block">
<div class="line">compInc &lt;- <strong>c</strong>(‘INCRMT’, ‘INCWAGE’, ‘INCFARMBSN’, ‘INCNFARMBSN’,
‘INCRENT’, ‘INCFIN’, ‘INCPENSN’, ‘INCOTHER’)</div>
<div class="line"><em># Add noise to income variables</em></div>
</div>
<p>sdcHH &lt;- <strong>addNoise</strong>(noise = 0.01, obj = sdcHH, variables = compInc,
method = “additive”)</p>
<p><em># Add noise to outliers</em></p>
<p>sdcHH &lt;- <strong>addNoise</strong>(noise = 0.05, obj = sdcHH, variables = compInc,
method = “outdect”)</p>
<p><em># Sum over income categories to obtain consistent totals</em></p>
<p>sdcHH&#64;manipNumVars[,’INCTOTGROSSHH’] &lt;-
<strong>rowSums</strong>(sdcHH&#64;manipNumVars[,compInc])</p>
<p><em># recalculate risks after manually changing values in sdcMicro object</em></p>
<p><strong>calcRisks</strong>(sdcHH)</p>
<p><strong>Step 9a: Re-measure risk</strong></p>
<p>For the categorical variables, we conclude that we have achieved
2-anonymity in the data with local suppression. Only 104 households, or
about 5% of the total number, violate 3-anonymity. Table 9.8 gives an
overview of these risk measures. The global risk is reduced to 0.02%
(expected number of re-identifications 0.36), which is extremely low.
Therefore, we conclude that based on the categorical variables, the data
has been sufficiently anonymized. No household has a risk of
re-identification higher than 0.01 (1%). By removing households with
rare values (or outliers) of the variable HHSIZE, we have reduced the
risk of spontaneous recognition of these households. This reasoning can
also be applied to the result of the risk of recoding the variable
LANDSIZEHA and PRAMming the variables identified to be important in the
nosy neighbor scenario. An intruder cannot know with certainty whether a
household that he recognizes in the data is the correct household, due
to the noise.</p>
<p>Table 9.8: Number and proportion of households violating k-anonymity
after anonymization</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="43%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>k-anonymity</strong></th>
<th class="head"><strong>Number HH violating</strong></th>
<th class="head"><strong>Percentage</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>104</td>
<td>5.28 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>374</td>
<td>18.70 %</td>
</tr>
</tbody>
</table>
<p>These measures refer only to the categorical variables. To evaluate the
risk of the continuous variables we could use an interval measure or
closest neighbor algorithm. These risk measures are discussed in Section
4.7. We chose to use an interval measure, since exact value matching is
not our largest concern based on the assumed scenarios and external data
sources. Instead, datasets with similar values but not the exact same
values could be used for matching. Here the main concern is that the
values are sufficiently far from the original values, which is measured
with an interval measure.</p>
<p>Example 9.20 shows how to evaluate the interval measure for each of the
expenditure variables, which are contained in the vector
<em>compExp</em> <a class="footnote-reference" href="#foot72" id="id2">[2]</a>. The different values of the parameter
<em>k</em> in the function dRisk() define the size of the interval around the
original value, as explained in Section 4.7.2<em>.</em> The larger <em>k</em>, the
larger the intervals, the higher the probability that a perturbed value
is in the interval around the original value and the higher the risk
measure. The result is satisfactory with relatively small intervals (k =
0.01), but not when increasing the size of the intervals. In our case, k
= 0.01 is sufficiently large, since we are looking at the components,
not the aggregates. We have to pay special attention to the outliers.
Here the value 0.01 for k is too small to assume that they are protected
when outside this small interval. It would be necessary to check
outliers and their perturbed values and there might be a need for a
higher level of perturbation for outliers. We conclude that, from a risk
perspective and based on the interval measure, the chosen levels of
noise are acceptable. In the next step, we will look at the impact on
the data utility of the noise addition.</p>
<p>Example 9.20: Measuring risk of re-identification of continuous
variables</p>
<p><strong>dRisk</strong>(sdcHH&#64;origData[,compExp], xm = sdcHH&#64;manipNumVars[,compExp],
k = 0.01)</p>
<p>[1] 0.0608828</p>
<p><strong>dRisk</strong>(sdcHH&#64;origData[,compExp], xm = sdcHH&#64;manipNumVars[,compExp],
k = 0.02)</p>
<p><strong>[1] 0.9025875</strong></p>
<p><strong>dRisk</strong>(sdcHH&#64;origData[,compExp], xm = sdcHH&#64;manipNumVars[,compExp],
k = 0.05)</p>
<p>[1] 1</p>
<p><strong>Step 10a: Re-measure utility</strong></p>
<p>None of the variables has been recoded and the original level of detail
in the data is kept, except for the variable LANDSIZEHA. As described in
Step 8a, local suppression has only removed a few values in the other
variables, which has not greatly reduced the validity of the data.</p>
<p>The univariate frequency distributions of the variables ROOF, TOILET,
WATER, ELECTCON, FUELCOOK, OWNMOTORCYCLE, CAR, TV and LIVESTOCK did not,
by definition of the invariant PRAM method (see Section 5.3.1), change
to a large extent. The tabulations are presented in Table 9.9 (the
values 1 – 9 and NA in the first row are the values of the variables and
.m after the variable name refers to the values after anonymization).
<strong>NOTE: Although the frequencies are almost the same, this does not mean
that the values of particular households did not change.</strong> Values have
been swapped between households. This becomes apparent when looking at
the multivariate frequencies of the WATER with the variable URBRUR in
Table 9.10. The multivariate frequencies of the PRAMmed with the
variable URBRUR could be of interest for users, but these are not
preserved. Since we applied PRAM within the regions, the multivariate
frequencies of the PRAMmed variables with REGION are preserved.</p>
<p>Table 9.9: Univariate frequencies of the PRAMmed variable before and
after anonymization</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head"><strong>0</strong></th>
<th class="head"><strong>1</strong></th>
<th class="head"><strong>2</strong></th>
<th class="head"><strong>3</strong></th>
<th class="head"><strong>4</strong></th>
<th class="head"><strong>5</strong></th>
<th class="head"><strong>6</strong></th>
<th class="head"><strong>7</strong></th>
<th class="head"><strong>8</strong></th>
<th class="head"><strong>9</strong></th>
<th class="head"><strong>NA</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ROOF</td>
<td>&#160;</td>
<td>27</td>
<td>1</td>
<td>914</td>
<td>307</td>
<td>711</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>10</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>ROOF.m</td>
<td>&#160;</td>
<td>25</td>
<td>1</td>
<td>907</td>
<td>319</td>
<td>712</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>6</td>
<td>1</td>
</tr>
<tr class="row-even"><td>TOILET</td>
<td>&#160;</td>
<td>76</td>
<td>594</td>
<td>817</td>
<td>481</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>3</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>TOILET.m</td>
<td>&#160;</td>
<td>71</td>
<td>597</td>
<td>816</td>
<td>483</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>4</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>WATER</td>
<td>&#160;</td>
<td>128</td>
<td>323</td>
<td>304</td>
<td>383</td>
<td>562</td>
<td>197</td>
<td>18</td>
<td>21</td>
<td>35</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>WATER.m</td>
<td>&#160;</td>
<td>134</td>
<td>319</td>
<td>308</td>
<td>378</td>
<td>573</td>
<td>188</td>
<td>16</td>
<td>21</td>
<td>34</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ELECTCON</td>
<td>768</td>
<td>216</td>
<td>8</td>
<td>2</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>977</td>
</tr>
<tr class="row-odd"><td>ELECTCON.m</td>
<td>761</td>
<td>218</td>
<td>8</td>
<td>3</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>981</td>
</tr>
<tr class="row-even"><td>FUELCOOK</td>
<td>&#160;</td>
<td>1289</td>
<td>21</td>
<td>376</td>
<td>55</td>
<td>36</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>139</td>
<td>55</td>
</tr>
<tr class="row-odd"><td>FUELCOOK.m</td>
<td>&#160;</td>
<td>1284</td>
<td>22</td>
<td>383</td>
<td>50</td>
<td>39</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>143</td>
<td>50</td>
</tr>
<tr class="row-even"><td>OWNMOTORCYCLE</td>
<td>1883</td>
<td>86</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>2</td>
</tr>
<tr class="row-odd"><td>OWNMOTORCYCLE.m</td>
<td>1882</td>
<td>86</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>2</td>
</tr>
<tr class="row-even"><td>CAR</td>
<td>963</td>
<td>31</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>977</td>
</tr>
<tr class="row-odd"><td>CAR.m</td>
<td>966</td>
<td>25</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>TV</td>
<td>1216</td>
<td>264</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>491</td>
</tr>
<tr class="row-odd"><td>TV.m</td>
<td>1203</td>
<td>272</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>496</td>
</tr>
</tbody>
</table>
<p>Table 9.10: Multivariate frequencies of the variables WATER with RURURB
before and after anonymization</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head"><strong>1</strong></th>
<th class="head"><strong>2</strong></th>
<th class="head"><strong>3</strong></th>
<th class="head"><strong>4</strong></th>
<th class="head"><strong>5</strong></th>
<th class="head"><strong>6</strong></th>
<th class="head"><strong>7</strong></th>
<th class="head"><strong>8</strong></th>
<th class="head"><strong>9</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WATER/URB</td>
<td>11</td>
<td>49</td>
<td>270</td>
<td>306</td>
<td>432</td>
<td>183</td>
<td>12</td>
<td>15</td>
<td>21</td>
</tr>
<tr class="row-odd"><td>WATER/RUR</td>
<td>114</td>
<td>274</td>
<td>32</td>
<td>76</td>
<td>130</td>
<td>14</td>
<td>6</td>
<td>6</td>
<td>14</td>
</tr>
<tr class="row-even"><td>WATER/URB.m</td>
<td>79</td>
<td>220</td>
<td>203</td>
<td>229</td>
<td>402</td>
<td>125</td>
<td>10</td>
<td>12</td>
<td>19</td>
</tr>
<tr class="row-odd"><td>WATER/RUR.m</td>
<td>54</td>
<td>98</td>
<td>105</td>
<td>147</td>
<td>169</td>
<td>63</td>
<td>6</td>
<td>9</td>
<td>15</td>
</tr>
</tbody>
</table>
<p>For conciseness, we restrict ourselves to the analysis of the
expenditure variables. The analysis of the income variables can be done
in the same way and leads to similar results.</p>
<p>We look at the effect of anonymization on some indicators as discussed
in Step 5. Table 9.11 presents the point estimates and bootstrapped
confidence interval of the GINI coefficient <a class="footnote-reference" href="#foot73" id="id3">[3]</a> for
the sum of the expenditure components. The calculation of the GINI
coefficient and the confidence interval are based on the positive
expenditure values. We observe very small changes in the Gini
coefficient, that are statistically negligible. We use a visualization
to illustrate the impact on utility of the anonymization. Visualizations
are discussed in Section 6.4 and the specific <em>R</em> code for this case
study is available in the <em>R</em> script. The change in the inequality
measures is illustrated in Figure 9.1, which shows the Lorenz curves
based on the positive expenditure values before and after anonymization.</p>
<p>Table 9.11: GINI point estimates and bootstrapped confidence intervals
for sum of expenditure components</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="29%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head"><strong>before</strong></th>
<th class="head"><strong>after</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Point estimate</td>
<td>0.510</td>
<td>0.508</td>
</tr>
<tr class="row-odd"><td>Left bound of CI</td>
<td>0.476</td>
<td>0.476</td>
</tr>
<tr class="row-even"><td>Right bound of CI</td>
<td>0.539</td>
<td>0.538</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="_images/image21.png"><img alt="_images/image21.png" src="_images/image21.png" style="width: 6.5in; height: 3.25in;" /></a>
<p>Figure 9.1: Lorenz curve based on positive total expenditures values</p>
<p>We compare the mean monthly expenditures (MME) and mean monthly income
(MMI) for rural, urban and total population. The results are shown in
Table 9.12. We observe that the chosen levels of noise add only small
distortions to the MME and slightly larger changes to the MMI.</p>
<p>Table 9.12: Mean monthly expenditure and mean monthly income per capita
by rural/urban</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="35%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head"><strong>before</strong></th>
<th class="head"><strong>after</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MME rural</td>
<td>400.5</td>
<td>398.5</td>
</tr>
<tr class="row-odd"><td>MME urban</td>
<td>457.3</td>
<td>459.9</td>
</tr>
<tr class="row-even"><td>MME total</td>
<td>412.6</td>
<td>412.6</td>
</tr>
<tr class="row-odd"><td>MMI rural</td>
<td>397.1</td>
<td>402.2</td>
</tr>
<tr class="row-even"><td>MMI urban</td>
<td>747.6</td>
<td>767.8</td>
</tr>
<tr class="row-odd"><td>MMI total</td>
<td>472.1</td>
<td>478.5</td>
</tr>
</tbody>
</table>
<p>Table 9.13 shows the share of each of the components of the expenditure
variables before and after anonymization.</p>
<p>Table 9.13 Shares of expenditures components</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head"><strong>TFOOD
EXP</strong></th>
<th class="head"><strong>TALCH
EXP</strong></th>
<th class="head"><strong>TCLTH
EXP</strong></th>
<th class="head"><strong>THOUS
EXP</strong></th>
<th class="head"><strong>TFURN
EXP</strong></th>
<th class="head"><strong>THLTH
EXP</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>before</td>
<td>0.58</td>
<td>0.01</td>
<td>0.03</td>
<td>0.09</td>
<td>0.02</td>
<td>0.03</td>
</tr>
<tr class="row-odd"><td>after</td>
<td>0.59</td>
<td>0.01</td>
<td>0.03</td>
<td>0.09</td>
<td>0.02</td>
<td>0.03</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>TTRAN
SEXP</strong></td>
<td><strong>TCOMM
EXP</strong></td>
<td><strong>TRECE
XP</strong></td>
<td><strong>TEDUE
XP</strong></td>
<td><strong>TRESH
OTEXP</strong></td>
<td><strong>TMISC
EXP</strong></td>
</tr>
<tr class="row-odd"><td>before</td>
<td>0.04</td>
<td>0.02</td>
<td>0.00</td>
<td>0.08</td>
<td>0.03</td>
<td>0.05</td>
</tr>
<tr class="row-even"><td>after</td>
<td>0.04</td>
<td>0.02</td>
<td>0.00</td>
<td>0.08</td>
<td>0.03</td>
<td>0.05</td>
</tr>
</tbody>
</table>
<p>Anonymization for the creation of a SUF will inevitably lead to some
degree of utility loss. It is important to describe this loss in the
external report, so that users are aware of the changes in the data.
This is described in Step 11 and presented in Appendix A. Appendix A
also shows summary statistics and tabulations of the household level
variables before and after anonymization.</p>
<p><strong>Merging the household- and individual-level variables</strong></p>
<p>The next step is to merge the treated household variables with the
untreated individual variables for the anonymization of the individual
level variables. Example 9.21 shows the steps to merge these files. This
also includes the selection of variables used in the anonymization of
the individual-level variables. We create the <em>sdcMicro</em> object for the
anonymization of the individual variables in the same way as for the
household variable in Example 9.9. Subsequently, we repeat Steps 6-10
for the individual-level variables.</p>
<p>Example 9.21: Merging the files with household and individual-level
variables and creating an <em>sdcMicro</em> object for the anonymization of the
individual-level variables</p>
<p><em>### Select variables (individual level)</em></p>
<div class="line-block">
<div class="line"><em># Key variables (individual level)</em></div>
<div class="line">selectedKeyVarsIND = <strong>c</strong>(‘GENDER’, ‘REL’, ‘MARITAL’, ‘AGEYRS’,
‘EDUCY’, ‘ATSCHOOL’, ‘INDUSTRY1’) <em># list of selected key variables</em></div>
<div class="line"><em># Sample weight (WGTHH, individual weight)</em></div>
<div class="line">selectedWeightVarIND = <strong>c</strong>(‘WGTHH’)</div>
<div class="line"><em># Household ID</em></div>
<div class="line">selectedHouseholdID = <strong>c</strong>(‘IDH’)</div>
<div class="line"><em># No strata</em></div>
<div class="line"><em># Recombining anonymized HH datasets and individual level variables</em></div>
<div class="line">indVars &lt;- <strong>c</strong>(“IDH”, “IDP”, selectedKeyVarsIND, “WGTHH”) <em># HID
and all non HH variables</em></div>
<div class="line">fileInd &lt;- file[indVars] <em># subset of file without HHVars</em></div>
</div>
<p>HHmanip &lt;- <strong>extractManipData</strong>(sdcHH) <em># manipulated variables HH</em></p>
<p>HHmanip &lt;- HHmanip[HHmanip[,’IDH’] != 1782,]</p>
<p>fileCombined &lt;- <strong>merge</strong>(HHmanip, fileInd, by.x=<strong>c</strong>(‘IDH’))</p>
<p>fileCombined &lt;- fileCombined[<strong>order</strong>(fileCombined[,’IDH’],
fileCombined[,’IDP’]),]</p>
<p><strong>dim</strong>(fileCombined)</p>
<div class="line-block">
<div class="line"><em># SDC objects with all variables and treated HH vars for
anonymization of individual level variables</em></div>
<div class="line">sdcCombined &lt;- <strong>createSdcObj</strong>(dat = fileCombined, keyVars =
selectedKeyVarsIND, weightVar = selectedWeightVarIND, hhId =
selectedHouseholdID)</div>
</div>
<p><strong>Step 6b: Assessing disclosure risk (individual level)</strong></p>
<p>All key variables at the individual level are categorical. Therefore, we
can use k-anonymity and the individual and global risk measures (see
Sections 4.5 and 4.8). The hierarchical risk is now of interest, given
the household structure in the dataset <em>fileCombined</em>, which includes
both household- and individual-level variables. The number of
individuals (absolute and relative) that violate k-anonymity at the
levels 2, 3 and 5 are shown in Table 9.14. <strong>NOTE: k-anonymity does not
consider the household structure and therefore underestimates the risk.
Therefore, we are more interested in the individual and global
hierarchical risk measures.</strong></p>
<p>Table 9.14: k-anonymity violations</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="43%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>k-anonymity</strong></th>
<th class="head"><strong>Number HH violating</strong></th>
<th class="head"><strong>Percentage</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>998</td>
<td>9.91%</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>1,384</td>
<td>13.75%</td>
</tr>
<tr class="row-even"><td>5</td>
<td>2,194</td>
<td>21.79%</td>
</tr>
</tbody>
</table>
<p>The global risk measures can be found using <em>R</em> as illustrated in
Example 9.22. The global risk is 0.24%, which corresponds to 24 expected
re-identifications. Accounting for the hierarchical structure, this
rises to 1.26%, or 127 expected re-identifications. The global risk
measures are low compared to the number of k-anonymity violators due to
the low sampling weights. The high number of k-anonymity violators is
mainly due to the very detailed age variable. The risk measures are
based only on the individual level variables, since we assume that the
individual and household level variables are be used simultaneously by
an intruder. If we would consider an intruder scenario where these
variables are used simultaneously by an intruder to re-identify
individuals, the household level variables should also be taken into
account here. This would results in a high number of key variables.</p>
<p>Example 9.22: Global risk of the individual-level variables</p>
<p><strong>print</strong>(sdcCombined, ‘risk’)</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Risk</span> <span class="pre">measures:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">with</span> <span class="pre">higher</span> <span class="pre">risk</span> <span class="pre">than</span> <span class="pre">the</span> <span class="pre">main</span> <span class="pre">part</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data:</span> <span class="pre">0</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Expected</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">re-identifications:</span> <span class="pre">23.98</span> <span class="pre">(0.24</span> <span class="pre">%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Information</span> <span class="pre">on</span> <span class="pre">hierarchical</span> <span class="pre">risk:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Expected</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">re-identifications:</span> <span class="pre">127.12</span> <span class="pre">(1.26</span> <span class="pre">%)</span></code></div>
</div>
<p><strong>Step 7b: Assessing utility (individual level)</strong></p>
<p>We evaluate the utility measures selected in Step 5 besides some general
utility measures. The values computed from the raw data are presented in
step 10b to allow for direct comparison with the values computed from
the anonymized data.</p>
<p><strong>Step 8b: Choice and application of SDC methods (individual level)</strong></p>
<p>We use the same approach for the anonymization of the individual-level
categorical key variables as for the household level categorical
variables described earlier: first use global recoding to limit the
necessary number of suppressions, then apply local suppressions and
finally, if necessary, use of perturbative methods.</p>
<p>The variable AGEYRS (i.e., age in years) has many different values (age
in months for children 0 – 1 years and age in years for individuals over
1 year). This level of detail leads to a high level of re-identification
risk, given external datasets with exact age as well as knowledge of the
exact age of close relatives. We have to reduce the level of detail in
the age variables by recoding the age values (see Section 5.2.1 on
recoding). First, we recode the values from 15 to 65 in ten-year
intervals. Since some indicators related to education are computed from
the survey dataset, our first approach is not to recode the age range 0
– 15 years. For children under the age of 1 year, we reduce the level of
detail and recode these to 0 years. These recodes are shown in Example
9.23. We also top-code age at the age of 65 years. This protects
individuals with high (rare) age values.</p>
<p>Example 9.23: Recoding age in 10-year intervals in the range 15 – 65 and
top code age over 65 years</p>
<p><em># Recoding age and top coding age (top code 65), below that 10 year age
groups, children aged under 1 are recoded 0 (previously in months)</em></p>
<p>sdcCombined&#64;manipKeyVars$AGEYRS[<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a> &gt;= 0 &amp;
<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a> &lt; 1] &lt;- 0</p>
<p>sdcCombined&#64;manipKeyVars$AGEYRS[<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a> &gt;= 15 &amp;
<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a> &lt; 25] &lt;- 20</p>
<p>…</p>
<p>sdcCombined&#64;manipKeyVars$AGEYRS[<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a> &gt;= 55 &amp;
<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a> &lt; 66] &lt;- 60</p>
<div class="line-block">
<div class="line"><em>#topBotCoding also recalculates risk based on manual recoding above</em></div>
<div class="line">sdcCombined &lt;- <strong>topBotCoding</strong>(obj = sdcCombined, value = 65,
replacement = 65, kind = ‘top’, column = ‘AGEYRS’)</div>
</div>
<div class="line-block">
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a>) <em># check results</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">0</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span>&#160;&#160;&#160; <span class="pre">4</span>&#160;&#160;&#160; <span class="pre">5</span>&#160;&#160;&#160; <span class="pre">6</span>&#160;&#160;&#160; <span class="pre">7</span>&#160;&#160;&#160; <span class="pre">8</span>&#160;&#160;&#160; <span class="pre">9</span>&#160;&#160; <span class="pre">10</span>&#160;&#160; <span class="pre">11</span>&#160;&#160; <span class="pre">12</span>&#160;&#160; <span class="pre">13</span>&#160;&#160; <span class="pre">14</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">311</span>&#160; <span class="pre">367</span>&#160; <span class="pre">340</span>&#160; <span class="pre">332</span>&#160; <span class="pre">260</span>&#160; <span class="pre">334</span>&#160; <span class="pre">344</span>&#160; <span class="pre">297</span>&#160; <span class="pre">344</span>&#160; <span class="pre">281</span>&#160; <span class="pre">336</span>&#160; <span class="pre">297</span>&#160; <span class="pre">326</span>&#160; <span class="pre">299</span>&#160; <span class="pre">263</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160; <span class="pre">20</span>&#160;&#160; <span class="pre">30</span>&#160;&#160; <span class="pre">40</span>&#160;&#160; <span class="pre">50</span>&#160;&#160; <span class="pre">60</span>&#160;&#160; <span class="pre">65</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">1847</span> <span class="pre">1220</span>&#160; <span class="pre">889</span>&#160; <span class="pre">554</span>&#160; <span class="pre">314</span>&#160; <span class="pre">325</span></code></div>
</div>
<p>These recodes already reduce the risk to 531 individuals violating
3-anonymity. We could recode the values of age in the lower range
according to the age categories users require (e.g., 8 – 11 for
education). There are many different categories for different
indicators, however, including education indicators. This would reduce
the utility of the data for some users. Therefore, we decide to look
first at the number of suppressions needed in local suppression after
this limited recoding. If the number of suppressions is too high, we can
go back and recode age in the range 1 – 14 years.</p>
<p>In Example 9.24 we demonstrate how one might experiment with local
suppression to find the best option. We use local suppression to achieve
3-anonymity (see Section 5.2.2 on local suppression). On the first
attempt, we do not specify any importance vector; this leads to many
suppressions in the variable AGEYRS (see Table 9.15 below, first row),
however. This is undesirable from a utility point of view. Therefore, we
decide to specify an importance vector to prevent suppressions in the
variable AGEYRS. Suppressing the variable GENDER is also undesirable
from the utility point of view. The variable GENDER is a type of
variable that should not have suppressions. We set GENDER as variable
with the second highest importance. After specifying the importance
vector to prevent suppressions of the age variable, there are no age
suppressions (see Table 9.15, second row). The total number of
suppressions in the other variables increased, however, from 253 to 323
because of the importance vector. This is to be expected because the
algorithm without the importance vector minimizes the total number of
suppressions by first suppressing values in variables with many
categories – in this case, age and gender. Specifying an importance
vector prevents reaching this optimality and hence leads to a higher
total number of suppressions. There is a trade-off between which
variables are suppressed and the total number of suppressions. After
specifying an importance vector, the variable REL has many suppressions
(see Table 9.15, second row). We choose this second option.</p>
<p>Example 9.24: Experimenting with different options in local suppression</p>
<div class="line-block">
<div class="line"><em># Copy of sdcMicro object to later undo steps</em></div>
<div class="line">sdcCopy &lt;- sdcCombined</div>
</div>
<div class="line-block">
<div class="line"><em># Importance vectors for local suppression (depending on utility
measures)</em></div>
<div class="line">impVec1 &lt;- NULL <em># for optimal suppression</em></div>
<div class="line">impVec2 &lt;- <strong>rep</strong>(<strong>length</strong>(selectedKeyVarsIND),
<strong>length</strong>(selectedKeyVarsIND))</div>
<div class="line">impVec2[<strong>match</strong>(‘AGEYRS’, selectedKeyVarsIND)] &lt;- 1 <em># AGEYRS</em></div>
<div class="line">impVec2[<strong>match</strong>(‘GENDER’, selectedKeyVarsIND)] &lt;- 2 <em># GENDER</em></div>
</div>
<div class="line-block">
<div class="line"><em># Local suppression without importance vector</em></div>
<div class="line">sdcCombined &lt;- <strong>localSuppression</strong>(sdcCombined, k = 2, importance =
impVec1)</div>
</div>
<div class="line-block">
<div class="line"><em># Number of suppressions per variable</em></div>
<div class="line"><strong>print</strong>(sdcCombined, “ls”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GENDER</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">REL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">34</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.338</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">MARITAL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">AGEYRS</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">195</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">1.937</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">EDUCY</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">EDYRSCURRAT</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">3</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.030</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">ATSCHOOL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">INDUSTRY1</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">21</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.209</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Number of suppressions per variable for each value of AGEYRS</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCopy&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCopy<span>&#64;</span>manipKeyVars$AGEYRS</a>) -
<strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a>)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">0</span>&#160; <span class="pre">1</span>&#160; <span class="pre">2</span>&#160; <span class="pre">3</span>&#160; <span class="pre">4</span>&#160; <span class="pre">5</span>&#160; <span class="pre">6</span>&#160; <span class="pre">7</span>&#160; <span class="pre">8</span>&#160; <span class="pre">9</span> <span class="pre">10</span> <span class="pre">11</span> <span class="pre">12</span> <span class="pre">13</span> <span class="pre">14</span> <span class="pre">20</span> <span class="pre">30</span> <span class="pre">40</span> <span class="pre">50</span> <span class="pre">60</span> <span class="pre">65</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">2</span>&#160; <span class="pre">0</span>&#160; <span class="pre">2</span>&#160; <span class="pre">1</span>&#160; <span class="pre">0</span>&#160; <span class="pre">1</span>&#160; <span class="pre">4</span>&#160; <span class="pre">1</span>&#160; <span class="pre">5</span> <span class="pre">25</span> <span class="pre">53</span> <span class="pre">37</span> <span class="pre">36</span> <span class="pre">15</span> <span class="pre">13</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Undo local suppression</em></div>
<div class="line">sdcCombined &lt;- <strong>undolast</strong>(sdcCombined)</div>
</div>
<div class="line-block">
<div class="line"><em># Local suppression with importance vector on AGEYRS and GENDER</em></div>
<div class="line">sdcCombined &lt;- <strong>localSuppression</strong>(sdcCombined, k = 2, importance =
impVec2)</div>
</div>
<div class="line-block">
<div class="line"><em># Number of suppressions per variable</em></div>
<div class="line"><strong>print</strong>(sdcCombined, “ls”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">GENDER</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">REL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">323</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">3.208</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">MARITAL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">AGEYRS</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">EDUCY</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">EDYRSCURRAT</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">ATSCHOOL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">INDUSTRY1</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Number of suppressions for each value of the variable AGEYRS</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCopy&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCopy<span>&#64;</span>manipKeyVars$AGEYRS</a>) -
<strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a>)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">0</span>&#160; <span class="pre">1</span>&#160; <span class="pre">2</span>&#160; <span class="pre">3</span>&#160; <span class="pre">4</span>&#160; <span class="pre">5</span>&#160; <span class="pre">6</span>&#160; <span class="pre">7</span>&#160; <span class="pre">8</span>&#160; <span class="pre">9</span> <span class="pre">10</span> <span class="pre">11</span> <span class="pre">12</span> <span class="pre">13</span> <span class="pre">14</span> <span class="pre">20</span> <span class="pre">30</span> <span class="pre">40</span> <span class="pre">50</span> <span class="pre">60</span> <span class="pre">65</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span>&#160; <span class="pre">0</span></code></div>
</div>
<p>Table 9.15: Number of suppressions by variable for different variations
of local suppression</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Loc
al
suppr
essio
n
optio
ns</th>
<th class="head">GENDER</th>
<th class="head">REL</th>
<th class="head">MARITAL</th>
<th class="head">AGEYRS</th>
<th class="head">EDUCY</th>
<th class="head"><dl class="first last docutils">
<dt>EDYRS</dt>
<dd>CURRAT</dd>
</dl>
</th>
<th class="head">ATS
CHOOL</th>
<th class="head">IND
USTRY1</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>k = 2,
no imp</td>
<td>0</td>
<td>34</td>
<td>0</td>
<td>195</td>
<td>0</td>
<td>3</td>
<td>0</td>
<td>21</td>
</tr>
<tr class="row-odd"><td>k = 2,
imp
on
AGEYRS</td>
<td>0</td>
<td>323</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><strong>Step 9b: Re-measure risk (individual level)</strong></p>
<p>We re-evaluate the risk measures selected in Step 6b. Table 9.16 shows
that local suppression, not surprisingly, has reduced the number of
individuals violating 2-anonymity to 0.</p>
<p>Table 9.16: k-anonymity violations</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="43%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>k-anonymity</strong></th>
<th class="head"><strong>Number HH violating</strong></th>
<th class="head"><strong>Percentage</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0.00 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>197</td>
<td>1.96 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>518</td>
<td>5.15 %</td>
</tr>
</tbody>
</table>
<p>The hierarchical global risk was reduced to 0.11%, which corresponds to
11.3 expected re-identifications. The highest individual hierarchical
re-identification risk is 1.21%. These risk levels would seem acceptable
for a SUF.</p>
<p><strong>Step 10b: Re-measure utility (individual level)</strong></p>
<p>We selected two utility measures for the individual variables: primary
and secondary education enrollment, both also by gender. These two
measures are sensitive to changes in the variables gender (GENDER), age
(AGEYRS) and education (EDUCY and EDYRSATCURR), and therefore give a
good overview of the impact of the anonymization. As shown in Table 9.17
the anonymization did not change the results. The results of the
tabulations in Appendix A confirm these results.</p>
<p>Table 9.17: Net enrollment in primary and secondary education by gender</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head" colspan="3">Primary education</th>
<th class="head" colspan="3">Secondary education</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>Total</td>
<td>Male</td>
<td>Female</td>
<td>Total</td>
<td>Male</td>
<td>Female</td>
</tr>
<tr class="row-odd"><td>Before</td>
<td>72.6%</td>
<td>74.2%</td>
<td>70.9%</td>
<td>42.0%</td>
<td>44.8%</td>
<td>39.1%</td>
</tr>
<tr class="row-even"><td>After</td>
<td>72.6%</td>
<td>74.2%</td>
<td>70.9%</td>
<td>42.0%</td>
<td>44.8%</td>
<td>39.1%</td>
</tr>
</tbody>
</table>
<p><strong>Step 11: Audit and reporting</strong></p>
<p>In the audit step, we check whether the data allow for reproduction of
published figures from the original dataset and relationships between
variables and other data characteristics are preserved in the
anonymization process. In short, we check whether the dataset is valid
for analytical purposes. There are no figures available that were
published from the dataset and need to be reproducible from the
anonymized data.</p>
<p>In Step 2, we explored the data characteristics and relationships
between variables. These data characteristics and relationships have
been mainly preserved, since we took them into account when choosing the
appropriate anonymization methods. The variables TANHHEXP and
INCTOTGROSSHH are the sums of the individual components, because we
added noise to the components and reconstructed the aggregates by
summing over the components. Initially, the income variables were all
positive. This characteristic has been violated, as a result of noise
addition. Since values of the variable AGEYRS were not perturbed, but
only recoded and suppressed, we did not introduce unlikely combinations,
such as a 60-year-old individual enrolled in primary education. Also, by
separating the anonymization process into two parts, one for
household-level variables and one for individual-level variables, the
values of variables measured at the household level agree for all
members of each household.</p>
<p>Furthermore, we drafted two reports, internal and external, on the
anonymization of the case study dataset. The internal report includes
the methods used, the risk before and after anonymization as well as the
reasons for the selected methods and their parameters. The external
report focuses on the changes in the data and the loss in utility. Focus
here should be on the number of suppressions as well as the perturbative
methods (PRAM). This is described in the previous steps. <strong>NOTE: When
creating a SUF, it is inevitable that there will be a loss of
information and it is very important for the users to be aware of these
changes and release them in a report that accompanies the data</strong>.
Appendix A provides examples of an internal and external report of the
anonymization process of this dataset. Depending on the users and
readers of the reports, the content may differ. The code to this case
study shows how to obtain the information for the reports. Some measures
are also available in the standard reports generated with the report()
function. This is shown in Example 9.25. The report() function will only
use the data available in the <em>sdcMicro</em> object, which does not contain
all households for sdcHH.</p>
<p>Example 9.25: Using the report() function for internal and external
reports</p>
<div class="line-block">
<div class="line"><em># Create reports with sdcMicro report() function</em></div>
<div class="line"><strong>report</strong>(sdcHH, internal = F) <em># external (brief) report</em></div>
</div>
<p><strong>report</strong>(sdcHH, internal = T) <em># internal (extended) report</em></p>
<div class="line-block">
<div class="line"><em># Create reports with sdcMicro report() function</em></div>
<div class="line"><strong>report</strong>(sdcCombined, internal = F) <em># external (brief) report</em></div>
</div>
<p><strong>report</strong>(sdcCombined, internal = T) <em># internal (extended) report</em></p>
<p><strong>Step 12: Data release</strong></p>
<p>The final step is the release of the anonymized dataset together with
the external report. Example 9.26 shows how to collect the data from the
<em>sdcMicro</em> object with the extractManipData() function. Before releasing
the file, we add an individual ID to the file (line number in
household). We export the anonymized dataset in as <em>STATA</em> file. Section
7.2 presents functions for exporting files in other data formats.</p>
<p>Example 9.26: Exporting the anonymized dataset</p>
<div class="line-block">
<div class="line"><em># Anonymized dataset</em></div>
<div class="line"><em># Household variables and individual variables</em></div>
<div class="line">dataAnon &lt;- <strong>extractManipData</strong>(sdcCombined, ignoreKeyVars = F,
ignorePramVars = F, ignoreNumVars = F, ignoreStrataVar = F) <em>#
extracts all variables, not just the manipulated ones</em></div>
</div>
<div class="line-block">
<div class="line"><em># Create STATA file</em></div>
<div class="line"><strong>write.dta</strong>(dataframe = dataAnon, file= ‘Case1DataAnon.dta’,
convert.dates=TRUE)</div>
</div>
</div>
<div class="section" id="case-study-2-puf">
<h2>Case study 2 - PUF<a class="headerlink" href="#case-study-2-puf" title="Permalink to this headline">¶</a></h2>
<p>This case study is a continuation of case study 1 in Section 9.1. Case
study 1 produces a SUF file. In this case study we use this SUF file to
produce a PUF file of the same dataset, which can be freely distributed.
The structure of the SUF and PUF releases will be the same. However, the
PUF will contain fewer variables and less (detailed) information than
the SUF. We refer to Section 9.1 for a description of the dataset.
<strong>NOTE</strong>: <strong>It is also possible to directly produce a PUF from a dataset
without first creating a SUF.</strong></p>
<p>As in case study 1, we show how the creation of a PUF can be achieved
using the open source and free <em>sdcMicro</em> package and <em>R</em>. A
ready-to-run <em>R</em> script for this case study and the dataset are also
available to reproduce the results and allow the user to adapt the code
(see&nbsp;<a class="reference external" href="http://ihsn.org/home/projects/sdc-practice">http://ihsn.org/home/projects/sdc-practice</a>). Extracts of this code
are presented in this section to illustrate several steps of the
anonymization process. <strong>NOTE: The choices of methods and parameters in
this case study are based on this particular dataset and the results and
choices might be different for other datasets.</strong></p>
<p>This case study follows the steps of the SDC process outlined in Chapter
8.</p>
<p><strong>Step 1: Need for disclosure control</strong></p>
<p>The same reasoning as in case study 1 applies: the SUF dataset produced
in case study 1 contains data on individuals and households and some
variables are confidential and/or sensitive. The decisions made in case
study 1 are based on the disclosure scenarios for a SUF release. The
anonymization applied for the SUF does not provide sufficient protection
for the release as PUF and the SUF file cannot be released as PUF
without further treatment. Therefore, we have to repeat the SDC process
with a different set of disclosure scenarios based on the
characteristics of a PUF release (see Step 4). This leads to different
risk measures, lower accepted risk levels and different SDC methods.</p>
<p><strong>Step 2: Data preparation and exploring data characteristics</strong></p>
<p>In order to guarantee consistency between the released PUF and SUF
files, which is required to prevent intruders from using the datasets
together (SUF users have also access to the PUF file), we have to use
the anonymized SUF file to create the PUF file (see also Section 8.3).
In this way all information in the PUF file is also contained in the
SUF, and the PUF does not provide additional information to an intruder
with access to the SUF. We load the required packages to read the data
(<em>foreign</em> package for <em>STATA</em> files) and load the SUF dataset into
“file” as illustrated in Example 9.27. We also load the original data
file (raw data) as “fileOrig”. We need the raw data to undo perturbative
methods used in case study 1 (see Step 8) and to compare data utility
measures (see Step 5). To evaluate the utility loss in the PUF, we have
to compare the information in the anonymized PUF file with the
information in the raw data. For an overview of the data characteristics
and a description of the variables in both files, we refer to Step 2 of
case study 1 in Section 9.1.</p>
<p>Example 9.27: Loading required packages and datasets</p>
<div class="line-block">
<div class="line"><em># Load required packages</em></div>
<div class="line"><strong>library</strong>(foreign) <em># for read/write function for STATA</em></div>
<div class="line"><strong>library</strong>(sdcMicro) <em># sdcMicro package</em></div>
</div>
<div class="line-block">
<div class="line"><em># Set working directory - set to the path on your machine</em></div>
<div class="line"><strong>setwd</strong>(“/Users/CaseStudy2”)</div>
</div>
<div class="line-block">
<div class="line"><em># Specify file name of SUF file from case study 1</em></div>
<div class="line">fname &lt;- “CaseDataAnon.dta”</div>
</div>
<div class="line-block">
<div class="line"><em># Specify file name of original dataset (raw data)</em></div>
<div class="line">fnameOrig &lt;- “CaseA.dta”</div>
</div>
<div class="line-block">
<div class="line"><em># Read-in files</em></div>
<div class="line">file &lt;- <strong>read.dta</strong>(fname, convert.factors = TRUE) <em># SUF file case
study 1
*fileOrig &lt;- **read.dta*</em>(fnameOrig, convert.factors = TRUE) <em>#
original data</em></div>
</div>
<p>We check the number of variables and number of observations of both
files and the variable names of the SUF file, as shown in Example 9.28.
The PUF file has fewer records and fewer variables than the original
data file, since we removed large households and several variables to
generate the SUF file.</p>
<p>Example 9.28 Number of individuals and variables and variable names</p>
<p><em># Dimensions of file (observations, variables)</em></p>
<p><strong>dim</strong>(file)</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">10068</span>&#160;&#160;&#160; <span class="pre">49</span></code></p>
<p><strong>dim</strong>(fileOrig)</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">10574</span>&#160;&#160;&#160; <span class="pre">68</span></code></p>
<p><strong>colnames</strong>(file) <em># Variable names</em></p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">[1]</span> <span class="pre">&quot;IDH&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;URBRUR&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;REGION&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;HHSIZE&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">[5]</span> <span class="pre">&quot;OWNAGLAND&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">&quot;RELIG&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;ROOF&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TOILET&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">[9]</span> <span class="pre">&quot;WATER&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;ELECTCON&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;FUELCOOK&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;OWNMOTORCYCLE&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[13]</span> <span class="pre">&quot;CAR&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TV&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;LIVESTOCK&quot;</span>&#160;&#160;&#160;&#160; <span class="pre">&quot;LANDSIZEHA&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[17]</span> <span class="pre">&quot;TANHHEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TFOODEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TALCHEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TCLTHEXP&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[21]</span> <span class="pre">&quot;THOUSEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TFURNEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;THLTHEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TTRANSEXP&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[25]</span> <span class="pre">&quot;TCOMMEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TRECEXP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TEDUEXP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;TRESTHOTEXP&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[29]</span> <span class="pre">&quot;TMISCEXP&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCTOTGROSSHH&quot;</span> <span class="pre">&quot;INCRMT&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCWAGE&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[33]</span> <span class="pre">&quot;INCFARMBSN&quot;</span>&#160;&#160;&#160; <span class="pre">&quot;INCNFARMBSN&quot;</span>&#160;&#160; <span class="pre">&quot;INCRENT&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCFIN&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[37]</span> <span class="pre">&quot;INCPENSN&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INCOTHER&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;WGTPOP&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;IDP&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[41]</span> <span class="pre">&quot;GENDER&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;REL&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;MARITAL&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;AGEYRS&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[45]</span> <span class="pre">&quot;EDUCY&quot;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;EDYRSCURRAT&quot;</span>&#160;&#160; <span class="pre">&quot;ATSCHOOL&quot;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;INDUSTRY1&quot;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[49]</span> <span class="pre">&quot;WGTHH&quot;</span></code></div>
</div>
<p>To get an overview of the values of the variables, we use tabulations
and cross-tabulations for categorical variables and summary statistics
for continuous variables. To include the number of missing values (‘NA’
or other), we use the option useNA = “ifany” in the table() function.
For some variables, these tabulations differ from the tabulations of the
raw data, due to the anonymization of the SUF file.</p>
<p>In Table 9.18 the variables in the dataset “file” are listed along with
concise descriptions of the variables, the level at which they are
collected (individual level (IND) or household level (HH)), the
measurement type (continuous, semi-continuous or categorical) and value
ranges. Note that the dataset contains a selection of 49 variables of
the 68 variable selected for the SUF release. The variables have been
preselected based on their relevance for data users and some variables
were removed while creating a SUF file. The numerical values for many of
the categorical variables are codes that refer to values, e.g., in the
variable “URBRUR”, 1 stands for ‘rural’ and 2 for ‘urban’. More
information on the meanings of coded values of the categorical variables
is available in the <em>R</em> code for this case study.</p>
<p>Any data cleaning, such as recoding missing value codes and removing
empty variables, was already done in case study 1. The same holds for
removing any direct identifiers. Direct identifiers are not released in
the SUF file.</p>
<p>We identified the following sensitive variables in the dataset:
variables related to schooling and labor force status as well as income
and expenditure related variables. These variables need protection.
Whether a variable is considered sensitive may depend on the release
type, country and the dataset itself.</p>
<p>Table 9.18: Overview of the variables in the dataset</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">No.</th>
<th class="head"><dl class="first last docutils">
<dt>Variable</dt>
<dd>name</dd>
</dl>
</th>
<th class="head">Description</th>
<th class="head">Level</th>
<th class="head">Measurement</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>IDH</td>
<td>Household
ID</td>
<td>HH</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1-2,000</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>IDP</td>
<td>Individua
l
ID</td>
<td>IND</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>1-13</td>
</tr>
<tr class="row-even"><td>3</td>
<td>REGION</td>
<td>Region</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>URBRUR</td>
<td>Area of
residence</td>
<td>HH</td>
<td>categoric
al</td>
<td>1, 2</td>
</tr>
<tr class="row-even"><td>5</td>
<td>WGTHH</td>
<td>Individua
l
weighting
coefficie
nt</td>
<td>HH</td>
<td>weight</td>
<td>31.2-8495
.7</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>WGTPOP</td>
<td>Populatio
n
weighting
coefficie
nt</td>
<td>IND</td>
<td>weight</td>
<td>45.8-9345
2.2</td>
</tr>
<tr class="row-even"><td>7</td>
<td>HHSIZE</td>
<td>Household
size</td>
<td>HH</td>
<td>semi-cont
inuous</td>
<td>1-33</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>GENDER</td>
<td>Gender</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>9</td>
<td>REL</td>
<td>Relations
hip
to
household
head</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-9</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>MARITAL</td>
<td>Marital
status</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-6</td>
</tr>
<tr class="row-even"><td>11</td>
<td>AGEYRS</td>
<td>Age in
completed
years</td>
<td>IND</td>
<td>semi-cont
inuous</td>
<td>0-65</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>RELIG</td>
<td>Religion
of
household
head</td>
<td>HH</td>
<td>categoric
al</td>
<td>1, 5-7, 9</td>
</tr>
<tr class="row-even"><td>13</td>
<td>ATSCHOOL</td>
<td>Currently
enrolled
in school</td>
<td>IND</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>EDUCY</td>
<td>Highest
level of
education
attended</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-6</td>
</tr>
<tr class="row-even"><td>15</td>
<td>EDYRSCURR
AT</td>
<td>Years of
education
for
currently
enrolled</td>
<td>IND</td>
<td>semi-cont
inuous</td>
<td>1-18</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>INDUSTRY1</td>
<td>Industry
classific
ation
(1-digit)</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-10</td>
</tr>
<tr class="row-even"><td>17</td>
<td>ROOF</td>
<td>Main
material
used for
roof</td>
<td>IND</td>
<td>categoric
al</td>
<td>1-5, 9</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>TOILET</td>
<td>Main
toilet
facility</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-4, 9</td>
</tr>
<tr class="row-even"><td>19</td>
<td>ELECTCON</td>
<td>Electrici
ty</td>
<td>HH</td>
<td>categoric
al</td>
<td>0-3</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>FUELCOOK</td>
<td>Main
cooking
fuel</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-5, 9</td>
</tr>
<tr class="row-even"><td>21</td>
<td>WATER</td>
<td>Main
source of
water</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-9</td>
</tr>
<tr class="row-odd"><td>22</td>
<td>OWNAGLAND</td>
<td>Ownership
of
agricultu
ral
land</td>
<td>HH</td>
<td>categoric
al</td>
<td>1-3</td>
</tr>
<tr class="row-even"><td>23</td>
<td>LANDSIZEH
A</td>
<td>Land size
owned by
household
(ha)
(agric
and non
agric)</td>
<td>HH</td>
<td>continuou
s</td>
<td>0-40</td>
</tr>
<tr class="row-odd"><td>24</td>
<td>OWNMOTORC
YCLE</td>
<td>Ownership
of
motorcycl
e</td>
<td>HH</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>25</td>
<td>CAR</td>
<td>Ownership
of car</td>
<td>HH</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>26</td>
<td>TV</td>
<td>Ownership
of
televisio
n</td>
<td>HH</td>
<td>categoric
al</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>27</td>
<td>LIVESTOCK</td>
<td>Number of
large-siz
ed
livestock
owned</td>
<td>HH</td>
<td>semi-cont
inuous</td>
<td>0-25</td>
</tr>
<tr class="row-odd"><td>28</td>
<td>INCRMT</td>
<td>Income –
Remittanc
es</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>29</td>
<td>INCWAGE</td>
<td>Income -
Wages and
salaries</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>30</td>
<td>INCFARMBS
N</td>
<td>Income -
Gross
income
from
household
farm
businesse
s</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>31</td>
<td>INCNFARMB
SN</td>
<td>Income
-Gross
income
from
household
nonfarm
businesse
s</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>INCRENT</td>
<td>Income -
Rent</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>33</td>
<td>INCFIN</td>
<td>Income -
Financial</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>34</td>
<td>INCPENSN</td>
<td>Income -
Pensions/
social
assistanc
e</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>35</td>
<td>INCOTHER</td>
<td>Income -
Other</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>36</td>
<td>INCTOTGRO
SSHH</td>
<td>Income -
Total</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>37</td>
<td>TFOODEXP</td>
<td>Total
expenditu
re
on food</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>38</td>
<td>TALCHEXP</td>
<td>Total
expenditu
re
on
alcoholic
beverages
,
tobacco
and
narcotics</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>39</td>
<td>TCLTHEXP</td>
<td>Total
expenditu
re
on
clothing</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>40</td>
<td>THOUSEXP</td>
<td>Total
expenditu
re
on
housing</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>41</td>
<td>TFURNEXP</td>
<td>Total
expenditu
re
on
furnishin
g</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>42</td>
<td>THLTHEXP</td>
<td>Total
expenditu
re
on health</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>43</td>
<td>TTRANSEXP</td>
<td>Total
expenditu
re
on
transport</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>44</td>
<td>TCOMMEXP</td>
<td>Total
expenditu
re
on
communica
tion</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>45</td>
<td>TRECEXP</td>
<td>Total
expenditu
re
on
recreatio
n</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>46</td>
<td>TEDUEXP</td>
<td>Total
expenditu
re
on
education</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>47</td>
<td>TRESHOTEX
P</td>
<td>Total
expenditu
re
on
restauran
ts
and
hotels</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>48</td>
<td>TMISCEXP</td>
<td>Total
expenditu
re
on
miscellan
eous
spending</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>49</td>
<td>TANHHEXP</td>
<td>Total
annual
nominal
household
expenditu
res</td>
<td>HH</td>
<td>continuou
s</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>It is always important to ensure that the relationships between
variables in the data are preserved during the anonymization process and
to explore and take note of these relationships before beginning the
anonymization. At the end of the anonymization process before the
release of the data, an audit should be conducted, using these initial
results, to check that these relationships are maintained in the
anonymized dataset (see Step 11).</p>
<p>In our dataset, we identify several relationships between variables that
need to be preserved during the anonymization process. The variables
“TANHHEXP” and “INCTOTGROSSHH” represent the total annual nominal
household expenditure and the total gross annual household income,
respectively, and these variables are aggregations of existing income
and expenditure components in the dataset.</p>
<p>The variables related to education are available only for individuals in
the appropriate age groups and missing for other individuals. In
addition, the household-level variables (cf. fourth column of Table
9.18) have the same values for all members in any particular household.
The value of household size corresponds to the actual number of
individuals belonging to that household in the dataset. As we proceed,
we have to take care that these relationships and structures are
preserved in the anonymization process.</p>
<p>We assume that the data are collected in a survey that uses simple
sampling of households. The data contains two weight coefficients:
“WGTHH” and “WGTPOP”. The relationship between the weights is
<span class="math notranslate nohighlight">\(WGTPOP\  = \ WGTHH\ *\ HHSIZE\)</span>. “WGTPOP” is the sampling weight
for the households and “WGTHH” is the sampling weight for the
individuals to be used for disclosure risk calculations. “WGTHH” is used
for computing individual-level indicators (such as education) and
“WGTPOP” is used for population level indicators (such as income
indicators). There are no strata variables available in the data. We
will use “WGTPOP” for the anonymization of the household variables and
“WGTHH” for the anonymization of the individual-level variables.</p>
<p><strong>Step 3: Type of release</strong></p>
<p>In this case study, we assume that the file will be released as a PUF,
which will be freely available to anyone interested in the data (see
Section 3.1 for the conditions and more information on the release of
PUFs). The PUF release is intended for users with lower information
requirements (e.g., students) and researchers interested in the
structure of the data and willing to do preliminary research. The PUF
file can give an idea to the researcher whether it is worthwhile for
their research to apply for access to the SUF file. Researchers willing
to do more in-depth research will most likely apply for SUF access.
Generally, users of a PUF file are not restricted by an agreement that
prevents them from using the data to re-identify individuals and hence
the accepted risk level is much lower than in the case of the SUF and
the set of released variables is limited.</p>
<p><strong>Step 4: Intruder scenarios and choice of key variables</strong></p>
<p>Next, based on the release type, we reformulate the intruder scenarios
for the PUF release. This leads to the selection of a set of
quasi-identifiers. Since this case study is based on a demo dataset, we
do not have a real context and we cannot define exact disclosure
scenarios. Therefore, we make hypothetical assumptions on possible
disclosure scenarios. We consider two types of disclosure scenarios: 1)
matching with other publically available datasets and 2) spontaneous
recognition. Since the dataset will be distributed as PUF, there are de
facto no restrictions on the use of the dataset by intruders.</p>
<p>For the sake of illustration, we assume that population registers are
available with the demographic variables gender, age, place of residence
(region, urban/rural), religion and other variables such as marital
status and variables relating to education and professional status that
are also present in our dataset. In addition, we assume that there is a
publically available cadastral register on land ownership. Based on this
analysis of available data sources, we have selected in case study 1 the
variables “REGION”, “URBRUR”, “HHSIZE”, “OWNAGLAND”, “RELIG”, “GENDER”,
“REL” (relationship to household head), “MARITAL” (marital status),
“AGEYRS”, “INDUSTRY1” and two variables relating to school attendance as
categorical quasi-identifiers, the expenditure and income variables as
well as LANDSIZEHA as continuous quasi-identifiers. According to our
assessment, these variables might enable an intruder to re-identify an
individual or household in the dataset by matching with other available
datasets. The key variables for PUF release generally coincide with the
key variables for the SUF release. Possibly, more variables could be
added, since the user has more possibilities to match the data
extensively and is not bound by any contract, as is in the case of the
SUF file. Equally, some key variables in the SUF file may not be
released in the PUF file and, as a consequence, these variables are
removed from the list of key variables.</p>
<p>Upon further consideration, this initial set of identifying variables is
too large for a PUF release, as the number of possible combinations
(keys) is very high and hence many respondents could be identified based
on these variables. Therefore, we decide to limit the set of key
variables, by excluding variables from the dataset for PUF release. The
choice of variables to be removed is led by the needs of the intended
PUF users. Assuming the typical users are mainly interested in aggregate
income and expenditure data, we can therefore remove from the initial
set of key variables “OWNAGLAND”, “RELIG” and “LANDSIZEHA” at the
household level and “EDYRSCURRAT” and “ATSCHOOL” at the individual
level. <strong>NOTE: These variables will not be released in the PUF file.</strong>
We also remove the income and expenditure components from the list of
key variables, since we reduce their information content by building
proportions (see Step 8a). The list of the remaining key variables is
presented in Table 9.19.</p>
<p>Table 9.19: Overview of selected key variables for PUF file</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Variable name</strong></th>
<th class="head"><strong>Variable
description</strong></th>
<th class="head"><strong>Measurement level</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>REGION</td>
<td>region</td>
<td>Household,
categorical</td>
</tr>
<tr class="row-odd"><td>URBRUR</td>
<td>area of residence</td>
<td>Household,
categorical</td>
</tr>
<tr class="row-even"><td>HHSIZE</td>
<td>household size</td>
<td>Household,
categorical</td>
</tr>
<tr class="row-odd"><td>TANHHEXP</td>
<td>total expenditure</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>INCTOTGROSSHH</td>
<td>total income</td>
<td>Household, continuous</td>
</tr>
<tr class="row-odd"><td>GENDER</td>
<td>gender</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-even"><td>REL</td>
<td>relationship to
household head</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-odd"><td>MARITAL</td>
<td>marital status</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-even"><td>AGEYRS</td>
<td>age in completed
years</td>
<td>Individual,
semi-continuous/categ
orical</td>
</tr>
<tr class="row-odd"><td>EDUCY</td>
<td>highest level of
education completed</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-even"><td>INDUSTRY1</td>
<td>industry
classification</td>
<td>Individual,
categorical</td>
</tr>
</tbody>
</table>
<p>The decision to release the dataset as a PUF means the level of
anonymization will be relatively high and consequently, the variables
are less detailed (e.g., after recoding) and a scenario of spontaneous
recognition is less likely. Nevertheless, we should check for rare
combinations or unusual patterns in the variables. Variables that may
lead to spontaneous recognition in our sample are amongst others
“HHSIZE” (household size) as well as “INCTOTGROSSHH” (aggregate income)
and “TANHHEXP” (total expenditure). Large households and households with
high income are easily identifiable, especially when combined with other
identifying variables such as a geographical identifier (“REGION”).
There might be only one or a few households/individuals in a certain
region with a high income, such as the local doctor. Variables that are
easily observable and known by neighbors such as “ROOF”, “TOILET”,
“WATER”, “ELECTCON”, “FUELCOOK”, “OWNMOTORCYCLE”, “CAR”, “TV” and
“LIVESTOCK” may also need protection depending on what stands out in the
community, since a user might be able to identify persons (s)he knows.
This is called the nosy-neighbor scenario.</p>
<p><strong>Step 5: Data key uses and selection of utility measures</strong></p>
<p>A PUF file contains less information and the file is generally used by
students as a teaching file, by researchers to get an idea about the
data structure, and for simple analyses. The users have generally lower
requirements than for a SUF file and the results of analysis may be less
precise. The researcher interested in a more detailed dataset, would
have to apply for access to the SUF file. Therefore, we select more
aggregate utility measures for the PUF file that reflect the intended
use of a PUF file. Data intensive measures, such as the Gini
coefficient, cannot be computed from the PUF file. Besides the standard
utility measures, such as tabulations, we evaluate the decile dispersion
ratio and a regression with the income deciles as regressand.</p>
<p>To measure the information loss, we should compare the initial data file
before any anonymization (including the anonymization for the SUF) with
the file after the anonymization for the PUF. Comparing the files
directly before and after the PUF anonymization would underestimate the
information loss, as this would omit the information loss due to SUF
anonymization. Therefore, in Step 2, we also loaded the raw dataset.</p>
<p><strong>Hierarchical (household) structure</strong></p>
<p>As noted in case study 1, the data has a household structure. For the
SUF release, we protected large households by removing these from the
dataset. Since some variables are measured on the household level and
thus have identical values for each household member, the values of the
household variables should be treated in the same way for each household
member (see Section 5.5). Therefore, we first anonymize only the
household variables. After this, we merge them with the individual-level
variables and then anonymize the individual-level and household-level
variables jointly.</p>
<p>Since the data has a hierarchical structure, Steps 6 through 10 are
repeated twice: Steps 6a through 10a are for the household-level
variables and Steps 6b through 10b for the combined dataset. In this
way, we ensure that household-level variable values remain consistent
across household members for each household and the household structure
cannot be used to re-identify individuals. This is further explained in
Sections 4.4 and 7.6.</p>
<p>Before continuing to Step 6a, we select the categorical key variables,
continuous key variables and any variables selected for use in PRAM
routines, as well as household-level sampling weights in <em>R</em>. We also
collect the variable names of the variables that will not be released.
The PRAM variables are variables select for the PRAM routine, which we
discuss further in Step 8a. We extract these selected household
variables from the SUF dataset and save them as “fileHH”. The choice of
PRAM variables is further explained in Step 8a. Example 9.29 illustrates
how these steps are done in <em>R</em> (see also Section 7.6).</p>
<p>Example 9.29: Selecting the variables for the household-level
anonymization</p>
<div class="line-block">
<div class="line"><em># Categorical key variables at household level</em></div>
<div class="line">selectedKeyVarsHH &lt;- <strong>c</strong>(‘URBRUR’, ‘REGION’, ‘HHSIZE’)</div>
<div class="line"><em># Continuous key variables</em></div>
<div class="line">numVarsHH &lt;- <strong>c</strong>(‘TANHHEXP’, ‘INCTOTGROSSHH’)</div>
<div class="line"><em># PRAM variables</em></div>
<div class="line">pramVarsHH &lt;- <strong>c</strong>(‘ROOF’, ‘TOILET’, ‘WATER’, ‘ELECTCON’,
‘FUELCOOK’, ‘OWNMOTORCYCLE’, ‘CAR’, ‘TV’, ‘LIVESTOCK’)</div>
<div class="line"><em># Household weight</em></div>
<div class="line">weightVarHH &lt;- <strong>c</strong>(‘WGTPOP’)</div>
<div class="line"><em># Variables not suitable for release in PUF (HH level)</em></div>
<div class="line">varsNotToBeReleasedHH &lt;- <strong>c</strong>(“OWNAGLAND”, “RELIG”, “LANDSIZEHA”)</div>
<div class="line"><em># Vector with names of all HH level variables</em></div>
<div class="line">HHVars &lt;- <strong>c</strong>(‘IDH’, selectedKeyVarsHH, pramVarsHH, numVarsHH,
weightVarHH)</div>
</div>
<div class="line-block">
<div class="line"><em># Create subset of file with only HH level variables</em></div>
<div class="line">fileHH &lt;- file[,HHVars]</div>
</div>
<p>Every household has the same number of entries as it has members (e.g.,
a household of three will be repeated three times in “fileHH”). Before
analyzing the household-level variables, we select only one entry per
household, as illustrated in Example 9.30. This is further explained in
Section 7.6. In the same way we extract “fileOrigHH” from “fileOrig”.
“fileOrigHH” contains all variables from the raw data, but contains
every household only once. We need “fileOrigHH” in Steps 8a and 10a for
undoing some perturbative methods used in the SUF file and computing
utility measures from the raw data respectively.</p>
<p>Example 9.30: Taking a subset with only households</p>
<div class="line-block">
<div class="line"><em># Remove duplicated rows based on IDH, one row per household in
fileHH</em></div>
<div class="line">fileHH &lt;- fileHH[<strong>which</strong>(!**duplicated**(fileHH$IDH)),] <em># SUF
file</em></div>
<div class="line">fileOrigHH &lt;-
fileOrig[<strong>which</strong>(!**duplicated**(fileOrig$IDH)),] <em># original
dataset</em></div>
<div class="line"><em># Dimensions of fileHH</em></div>
<div class="line"><strong>dim</strong>(fileHH)</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">1970</span>&#160;&#160; <span class="pre">16</span></code></p>
<p><strong>dim</strong>(fileOrigHH)</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">2000</span>&#160;&#160; <span class="pre">68</span></code></p>
<p>The file “fileHH” contains 1,970 households and 16 variables. We are now
ready to create our <em>sdcMicro</em> object with the corresponding variables
we selected in Example 9.28. For our case study, we will create an
<em>sdcMicro</em> object called “sdcHH” based on the data in “fileHH”, which we
will use for steps 6a – 10a (see Example 9.31). <strong>NOTE: When the
sdcMicro object is created, the sdcMicro package automatically
calculates and stores the risk measures for the data.</strong> This leads us to
Step 6a.</p>
<p>Example 9.31: Creating a <em>sdcMicro</em> object for the household variables</p>
<div class="line-block">
<div class="line"><em># Create initial sdcMicro object for household level variables</em></div>
<div class="line">sdcHH &lt;- <strong>createSdcObj</strong>(dat = fileHH, keyVars = selectedKeyVarsHH,</div>
<div class="line">pramVars = pramVarsHH, weightVar = weightVarHH, numVars = numVarsHH)</div>
<div class="line">numHH &lt;- <strong>length</strong>(fileHH[,1]) <em># number of households</em></div>
</div>
<p><strong>Step 6a: Assessing disclosure risk (household level)</strong></p>
<p>Based on the key variables selected in the disclosure scenarios, we can
evaluate the risk at the household level. The PUF risk measures show a
lower risk level than in the SUF file after anonymization in case study
1. The reason is that the set of key variables is smaller, since some
variables will not be released in the PUF file. Removing (key) variables
reduces the risk, and it is one of the most straightforward SDC methods.</p>
<p>As a first measure, we evaluate the number of households violating
<span class="math notranslate nohighlight">\(k\)</span>-anonymity at the levels 2, 3 and 5. Table 9.20 shows the
number of violating households as well as the percentage of the total
number of households. Example 9.32 illustrates how to find these values
with <em>sdcMicro</em>. The print() function in <em>sdcMicro</em> shows only the
values for thresholds 2 and 3. Values for other thresholds can be
calculated manually by summing up the frequencies smaller than the
<span class="math notranslate nohighlight">\(k\)</span>-anonymity threshold, as shown in Example 9.32. The number of
violators is already at a low level, due to the prior anonymization of
the SUF file and the reduced set of key variables.</p>
<p>Table 9.20: Number and proportion of households violating
<span class="math notranslate nohighlight">\(\mathbf{k}\)</span>-anonymity</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>k-anonymity level</strong></th>
<th class="head"><strong>Number of HH
violating</strong></th>
<th class="head"><strong>Percentage of total
number of HH</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0.0%</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>18</td>
<td>0.9%</td>
</tr>
<tr class="row-even"><td>5</td>
<td>92</td>
<td>4.7%</td>
</tr>
</tbody>
</table>
<p>Example 9.32: Showing number of households violating
<span class="math notranslate nohighlight">\(\mathbf{k}\)</span>-anonymity for levels 2, 3 and 5</p>
<div class="line-block">
<div class="line"><em># Number of observations violating k-anonymity (thresholds 2 and 3)</em></div>
<div class="line"><strong>print</strong>(sdcHH)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Infos</span> <span class="pre">on</span> <span class="pre">2/3-Anonymity:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">violating</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">2-anonymity:</span> <span class="pre">0</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">3-anonymity:</span> <span class="pre">18</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Percentage</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">violating</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">2-anonymity:</span> <span class="pre">0.000</span> <span class="pre">%</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">3-anonymity:</span> <span class="pre">0.914</span> <span class="pre">%</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">--------------------------------------------------------------------------</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Calculate sample frequencies and count number of obs. violating k
(5) - anonymity</em></div>
<div class="line">kAnon5 &lt;- <strong>sum</strong>(sdcHH&#64;risk$individual[,2] &lt; 5)</div>
</div>
<p>kAnon5</p>
<p>## [1] 92</p>
<div class="line-block">
<div class="line"><em># As percentage of total</em></div>
<div class="line">kAnon5 / numHH</div>
</div>
<p>## [1] <code class="docutils literal notranslate"><span class="pre">0.04670051</span></code></p>
<p>It is often useful to view the records of the household(s) that violate
<span class="math notranslate nohighlight">\(k\)</span>-anonymity. This might help to find which variables cause the
uniqueness of these households; this can then be used later when
choosing appropriate SDC methods. Example 9.32 shows how to access the
values of the households violating 3 and 5-anonymity. Not surprisingly,
the variable “HHSIZE” is responsible for many of the unique combinations
and the origin of much of the risk. This is even the case after removing
large households for the SUF release.</p>
<p>Example 9.33: Showing records of households that violate
<span class="math notranslate nohighlight">\(\mathbf{k}\)</span>-anonymity</p>
<div class="line-block">
<div class="line"><em># Show values of key variable of records that violate k-anonymity</em></div>
<div class="line">fileHH[sdcHH&#64;risk$individual[,2] &lt; 3, selectedKeyVarsHH] <em># for
3-anonymity</em></div>
</div>
<p>fileHH[sdcHH&#64;risk$individual[,2] &lt; 5, selectedKeyVarsHH] <em># for
5-anonymity</em></p>
<p>We also assess the disclosure risk of the categorical variables with the
individual and global risk measures as described in Sections 4.5 and
4.8. In “fileHH” every entry represents a household. Therefore, we use
the individual non-hierarchical risk here, where the individual refers
in this case to a household. “fileHH” is a subset of the complete
dataset and contains only households and has, contrary to the complete
dataset, no hierarchical structure. In Step 6b, we evaluate the
hierarchical risk in the dataset “file”, the dataset containing both
households and individuals. The individual and global risk measures
automatically take into consideration the household weights, which we
defined in Example 9.29. In our file, the global risk measure calculated
using the chosen key variables is lower than 0.01% (the smallest
reported value is 0.01%, in fact the global risk is 0.0000642 %). This
percentage is extremely low and corresponds to 0.13 expected
re-identifications. The results are also shown in Example 9.34. This low
figure can be explained by the relatively small sample size of 0.25% of
the total population (see case study 1). Furthermore, one should keep in
mind that this risk measure is based only on the categorical
quasi-identifiers at the household level.</p>
<p>Example 9.34: Printing global risk measures</p>
<p><strong>print</strong>(sdcHH, “risk”)</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Risk</span> <span class="pre">measures:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">with</span> <span class="pre">higher</span> <span class="pre">risk</span> <span class="pre">than</span> <span class="pre">the</span> <span class="pre">main</span> <span class="pre">part</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data:</span> <span class="pre">0</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Expected</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">re-identifications:</span></code><code class="docutils literal notranslate"><span class="pre">0</span></code><code class="docutils literal notranslate"><span class="pre">.</span></code><code class="docutils literal notranslate"><span class="pre">1</span></code><code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">(0.0</span></code><code class="docutils literal notranslate"><span class="pre">1</span></code><code class="docutils literal notranslate"><span class="pre">%)</span></code></div>
</div>
<p>The global risk measure does not provide information about the spread of
the individual risk measures. There might be a few households with
relatively high risk, while the global (average) risk is low. Therefore
we check the highest individual risk as shown in Example 9.35. The
individual risk of the household with the highest risk is 0.1 %, which
is still very low.</p>
<p>Example 9.35 Determining the highest individual risk</p>
<div class="line-block">
<div class="line"><em># Highest individual risk</em></div>
<div class="line"><strong>max</strong>(sdcHH&#64;risk$individual[, “risk”])</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.001011633</span></code></p>
<p>Since the selected key variables at the household level are both
categorical and numerical, the individual and global risk measures based
on frequency counts do not completely reflect the disclosure risk of the
entire dataset. When generating the SUF file, we concluded that recoding
of continuous variables to make them all categorical would likely not
satisfy the needs of the SUF users. For the PUF file it is acceptable to
recode continuous variables, such as income and expenditures since PUF
content is typically less detailed. In Step 8a we will recode these
variables into deciles and convert them into categorical variables.
Therefore, we exclude these variables from the risk calculations now We
take these variables into account while remeasuring risk after
anonymization.</p>
<p><strong>Step 7a: Assessing utility measures (household level)</strong></p>
<p>The utility of the data does not only depend on the household level
variables, but on the combination of household-level and
individual-level variables. Therefore, it is not useful to evaluate all
the utility measures selected in Step 5 at this stage, i.e., before
anonymizing the individual level variables. We restrict the initial
measurement of utility to those measures that are solely based on the
household variables. In our dataset, these are the measures related to
income and expenditure and their distributions. The results are
presented in Step 10a, together with the results after anonymization,
which allow direct comparison. If after the next anonymization step it
appears that the data utility has been significantly decreased by the
suppression of some household level variables, we can return to this
step. <strong>NOTE: to analyze the utility loss, the utility measures before
anonymization have to be calculated from the raw data and not from the
anonymized SUF file.</strong> Not all measures from case study 1 can be
computed from the PUF file, since the information content is lower. The
set of utility measures we use to evaluate the information loss in the
PUF file consists of measures that need less detailed variables. This
reflects the lower requirements a PUF user has on the dataset.</p>
<p><strong>Step 8a: Choice and application of SDC methods (household level)</strong></p>
<p>This step is divided into the anonymization of the categorical key
variables and the continuous key variables, since different methods are
used for both sets of variables. As already discussed in Step 4, we do
not release all variables in the PUF file. At the household level
“RELIG” (religion of household head), “OWNAGLAND” (land ownership) and
“LANDSIZEHA” (plot size in ha) are not released in addition to the
variables removed for the SUF release. For the sake of illustration, we
assume that the variable “RELIG” is too sensitive and the variables
“OWNAGLAND” and “LANDSIZEHA” are too identifying.</p>
<p><strong>Categorical variables</strong></p>
<p>We are now ready to move on to the choice of SDC methods for the
categorical variables on the household level in our dataset. In the SUF
file we already recoded some of the key variables and used local
suppression. We only have three categorical key variables at the
household level; “URBRUR”, “REGION” and “HHSIZE”. The selected
categorical key variables at the household level are not suitable for
recoding at this point, since the values cannot be grouped further.
“URBRUR” has only two distinct categories and “REGION” has only six
non-combinable regions. As noted before, the variable “HHSIZE” can be
reconstructed by a headcount per household. Therefore, recoding of this
variable alone does not lead to disclosure control.</p>
<p>Due to the relatively low risk of re-identification based on the three
selected categorical household level variables, it is possible in this
case to use an option like local suppression to achieve our desired
level of risk. Applying local suppression when initial risk is
relatively low will likely only lead to suppression of few observations
and thus limit the loss of utility. If, however, the data had been
measured to have a relatively high risk, then applying local suppression
without previous recoding would likely result in a large number of
suppressions and greater information loss. Efforts such a recoding
should be taken first before suppressing values in cases where risk is
initially measured as high. Recoding will reduce risk with little
information loss and thus the number of suppressions, if local
suppression is applied as an additional step.</p>
<p>We apply local suppression to reach 5-anonymity. The chosen level of
five is higher than in the SUF release and is based on the release type
as PUF. This leads to a total of 39 suppressions, all in the variable
“HHSIZE”. As explained earlier, suppression of the value of the variable
“HHSIZE” does not lead to actual suppression of this information.
Therefore, we redo the local suppression, but this time we tell
<em>sdcMicro</em> to, if possible, not suppress “HHSIZE” but one of the other
variables. Alternatively, we could remove households with suppressed
values of the variable “HHSIZE”, remove large households or split
households.</p>
<p>In <em>sdcMicro</em> it is possible to tell the algorithm which variables are
important and less important for making small changes (see also Section
5.2.2). To prevent values of the variable “HHSIZE” being suppressed, we
set the importance of “HHSIZE” in the importance vectors to the highest
(i.e., 1). We try two different importance vectors: the first where
“REGION” is more important than “URBRUR” and the second with the
importance of “REGION” and “URBRUR” swapped. Example 9.36 shows how to
apply local suppression and put importance on the variable “HHSIZE”.
<strong>NOTE: In</strong> <strong>Example 9.36 we use the undolast() function in sdcMicro
to go one step back after we had first applied local suppression with no
importance vector.</strong> The undolast() function restores the <em>sdcMicro</em>
object back to the previous state (i.e., before we applied local
suppression), which allows us to rerun the same command, but this time
with an importance vector set. The undolast() function can only be used
to go one step back.</p>
<p>The suppression patterns of the three different options are shown in
Table 9.21. The importance is clearly reflected in the number of
suppressions per variable. The total number of suppressions is with an
importance vector higher than without an importance vector (44/73 vs.
39), but 5-anonymity is achieved in the dataset with no suppressions in
the variable “HHSIZE”. This means that we do not have to remove or split
households. The variable “REGION” is the type of variable that should
not have any suppressions either. From that perspective we chose the
third option. This leads to more suppressions, but no suppressions in
“HHSIZE” and as few as possible in “REGION”.</p>
<p>Table 9.21: Number of suppressions by variable after local suppression
with and without importance vector</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key variable</th>
<th class="head" colspan="3">Number of suppressions and proportion of total</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><em>No importance
vector</em></td>
<td><em>Importance
HHSIZE, URBRUR,
REGION</em></td>
<td><em>Importance
HHSIZE, REGION,
URBRUR</em></td>
</tr>
<tr class="row-odd"><td><em>URBRUR</em></td>
<td>0 (0.0 %)</td>
<td>2 (0.1 %)</td>
<td>61 (3.1 %)</td>
</tr>
<tr class="row-even"><td><em>REGION</em></td>
<td>0 (0.0 %)</td>
<td>42 (2.1 %)</td>
<td>12 (0.6 %)</td>
</tr>
<tr class="row-odd"><td><em>HHSIZE</em></td>
<td>39 (2.0 %)</td>
<td>0 (0.0 %)</td>
<td>0 (0.0 %)</td>
</tr>
</tbody>
</table>
<p>Example 9.36: Local suppression with and without importance vector</p>
<div class="line-block">
<div class="line"><em># Local suppression to achieve 5-anonimity</em></div>
<div class="line">sdcHH &lt;- <strong>localSuppression</strong>(sdcHH, k = 5, importance = NULL) <em># no
importance vector</em></div>
<div class="line"><strong>print</strong>(sdcHH, “ls”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">URBRUR</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">REGION</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">HHSIZE</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">39</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">1.980</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">---------------------------------------------------------------------------</span></code></div>
</div>
<div class="line-block">
<div class="line">sdcHH &lt;- <strong>undolast</strong>(sdcHH) <em># undo suppressions to see the effect
of an importance vector</em></div>
<div class="line"><em># Redo local suppression minimizing the number of suppressions in
HHSIZE</em></div>
<div class="line">sdcHH &lt;- <strong>localSuppression</strong>(sdcHH, k = 5, importance = <strong>c</strong>(2,
3, 1))</div>
<div class="line"><strong>print</strong>(sdcHH, “ls”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">URBRUR</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">2</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.102</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">REGION</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">42</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">2.132</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">HHSIZE</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">---------------------------------------------------------------------------</span></code></div>
</div>
<div class="line-block">
<div class="line">sdcHH &lt;- <strong>undolast</strong>(sdcHH) <em># undo suppressions to see the effect
of a different importance vector</em></div>
<div class="line"><em># Redo local suppression minimizing the number of suppressions in
HHSIZE</em></div>
<div class="line">sdcHH &lt;- <strong>localSuppression</strong>(sdcHH, k = 5, importance = <strong>c</strong>(3,
2, 1))</div>
<div class="line"><strong>print</strong>(sdcHH, “ls”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">URBRUR</span> <span class="pre">|</span></code><code class="docutils literal notranslate"><span class="pre">61</span></code><code class="docutils literal notranslate"><span class="pre">|</span></code><code class="docutils literal notranslate"><span class="pre">3</span></code><code class="docutils literal notranslate"><span class="pre">.</span></code><code class="docutils literal notranslate"><span class="pre">096</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">REGION</span> <span class="pre">|</span></code><code class="docutils literal notranslate"><span class="pre">1</span></code><code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">|</span></code><code class="docutils literal notranslate"><span class="pre">0</span></code><code class="docutils literal notranslate"><span class="pre">.</span></code><code class="docutils literal notranslate"><span class="pre">609</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">HHSIZE</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">---------------------------------------------------------------------------</span></code></div>
</div>
<p>In case study 1 we applied invariant PRAM to the variables “ROOF”,
“TOILET”, “WATER”, “ELECTCON”, “FUELCOOK”, “OWNMOTORCYCLE”, “CAR”, “TV”
and “LIVESTOCK”, since these variables are not sensitive and were not
selected as quasi-identifiers because we assumed that there are no
external data sources containing this information that could be used for
matching. Values can be easily observed or be known to neighbors,
however, and therefore are important, together with other variables, for
the nosy neighbor scenario. For the PUF release we would like to level
of uncertainty by increasing the number of changes. Therefore, we redo
PRAM with a different transition matrix. As discussed in Section 5.3.1,
the invariant PRAM method has the property that the univariate
distributions do not change. To maintain this property, we reapply PRAM
to the raw data, rather than to the already PRAMmed variables in the SUF
file.</p>
<p>Example 9.37 illustrates how to apply PRAM. We use the original values
to apply PRAM and replace the values in the <em>sdcMicro</em> object with these
values. We choose the parameter ‘pd’, the lower bound for the
probability that a value is not changed, to be relatively low at 0.6.
This is a lower value than the 0.8 used in the SUF file and will lead to
a higher number of changes (cf. Example 9.17 on page 135). This is
acceptable for a PUF file and introduces more uncertainty as required
for a PUF release. Example 9.37 also shows the number of changed records
per variables. Because PRAM is a probabilistic method, we set a seed for
the random number generator before applying PRAM to ensure
reproducibility of the results. <strong>Note: In some cases the choice of the
seed matters. The choice of seed changes the results.</strong> The seed should
not be released, since it allows for reconstructing the original values
if combined with the transition matrix. The transition matrix can be
released: this allows for consistent statistical inference by correcting
the statistical methods used if the researcher has knowledge about the
PRAM method (at this point <em>sdcMicro</em> does not allow to retrieve the
transition matrix).</p>
<p>Example 9.37: Applying PRAM</p>
<div class="line-block">
<div class="line"><em># PRAM</em></div>
<div class="line"><strong>set.seed</strong>(10987)</div>
<div class="line"><em># Replace PRAM variables in sdcMicro object sdcHH with the original
raw values</em></div>
<div class="line">sdcHH&#64;origData[,pramVarsHH] &lt;- fileHH[<strong>match</strong>(fileHH$IDH,
fileOrigHH$IDH), pramVarsHH]</div>
<div class="line"><a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipPramVars">sdcHH<span>&#64;</span>manipPramVars</a> &lt;- fileHH[<strong>match</strong>(fileHH$IDH,
fileOrigHH$IDH), pramVarsHH]</div>
<div class="line">sdcHH &lt;- <strong>pram</strong>(obj = sdcHH, pd = 0.6)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">changed</span> <span class="pre">observations:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span> <span class="pre">-</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">ROOF</span> <span class="pre">!=</span> <span class="pre">ROOF_pram</span> <span class="pre">:</span> <span class="pre">305</span> <span class="pre">(15.48%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">TOILET</span> <span class="pre">!=</span> <span class="pre">TOILET_pram</span> <span class="pre">:</span> <span class="pre">260</span> <span class="pre">(13.2%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">WATER</span> <span class="pre">!=</span> <span class="pre">WATER_pram</span> <span class="pre">:</span> <span class="pre">293</span> <span class="pre">(14.87%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">ELECTCON</span> <span class="pre">!=</span> <span class="pre">ELECTCON_pram</span> <span class="pre">:</span> <span class="pre">210</span> <span class="pre">(10.66%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">FUELCOOK</span> <span class="pre">!=</span> <span class="pre">FUELCOOK_pram</span> <span class="pre">:</span> <span class="pre">315</span> <span class="pre">(15.99%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">OWNMOTORCYCLE</span> <span class="pre">!=</span> <span class="pre">OWNMOTORCYCLE_pram</span> <span class="pre">:</span> <span class="pre">95</span> <span class="pre">(4.82%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">CAR</span> <span class="pre">!=</span> <span class="pre">CAR_pram</span> <span class="pre">:</span> <span class="pre">255</span> <span class="pre">(12.94%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">TV</span> <span class="pre">!=</span> <span class="pre">TV_pram</span> <span class="pre">:</span> <span class="pre">275</span> <span class="pre">(13.96%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">LIVESTOCK</span> <span class="pre">!=</span> <span class="pre">LIVESTOCK_pram</span> <span class="pre">:</span> <span class="pre">109</span> <span class="pre">(5.53%)</span></code></div>
</div>
<p>PRAM has changed values within the variables according to the invariant
transition matrices. Since we used the invariant PRAM method (see
Section 5.3.1), the absolute univariate frequencies remain approximately
unchanged. This is not the case for the multivariate frequencies. In
Step 10a we compare the multivariate frequencies before and after
anonymization for the PRAMmed variables.</p>
<p><strong>Continuous variables</strong></p>
<p>We have selected the variables “INCTOTGROSSHH” (total income) and
“TANHHEXP” (total expenditure) as numerical quasi-identifiers, as
discussed in Step 4. In Step 5 we identified variables having high
interest for the users of our data: many users use the data for
measuring inequality and expenditure patterns. The noise addition in the
SUF file does not protect these variables sufficiently, especially,
because outliers are not protected. Therefore, we decide to recode total
income and total expenditure into deciles.</p>
<p>As with PRAM, we want to compute the deciles from the raw data rather
than from the perturbed values in the SUF file. We compute the deciles
directly from the raw data and overwrite these values in the <em>sdcMicro</em>
object. Subsequently, we compute the mean of each decile from the raw
data and replace the values for total income and total expenditures with
the mean of the respective decile. In this way the mean of both
variables does not change. This approach can be interpreted as
univariate microaggregation with very large groups (group size n/10)
with the mean as replacement value (see Section 5.3.2).</p>
<p>The information in the income and expenditure variables by component is
too sensitive to release as PUF, and, summing those variables would
allow an intruder to reconstruct the totals. PUF users might however be
interested in the shares. Therefore, we decide to keep the income and
expenditure components as proportions of the raw totals, rounded to two
digits. The anonymization of the income and expenditure variables is
shown in Example 9.38.</p>
<p>Example 9.38: Anonymization of income and expenditure variables</p>
<div class="line-block">
<div class="line"><em># Create bands (deciles) for income and expenditure variables
(aggregates) based on the original data</em></div>
<div class="line">decExp &lt;-
<strong>as.numeric</strong>(<strong>cut</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH,
fileOrigHH$IDH), “TANHHEXP”],
<strong>quantile</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH, fileOrigHH$IDH),
“TANHHEXP”], (0:10)/10, na.rm = T), include.lowest = TRUE, labels =
<strong>c</strong>(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)))</div>
<div class="line">decInc &lt;-
<strong>as.numeric</strong>(<strong>cut</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH,
fileOrigHH$IDH), “INCTOTGROSSHH”],
<strong>quantile</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH, fileOrigHH$IDH),
“INCTOTGROSSHH”], (0:10)/10, na.rm = T), include.lowest = TRUE, labels
= <strong>c</strong>(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)))</div>
<div class="line"><em># Mean values of deciles</em></div>
<div class="line">decExpMean &lt;-
<strong>round</strong>(<strong>sapply</strong>(<strong>split</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH,
fileOrigHH$IDH), “TANHHEXP”], decExp), mean))</div>
<div class="line">decIncMean &lt;-
<strong>round</strong>(<strong>sapply</strong>(<strong>split</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH,
fileOrigHH$IDH), “INCTOTGROSSHH”], decInc), mean))</div>
<div class="line"><em># Replace with mean value of decile</em></div>
<div class="line"><a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$TANHHEXP">sdcHH<span>&#64;</span>manipNumVars$TANHHEXP</a> &lt;- decExpMean[<strong>match</strong>(decExp,
<strong>names</strong>(decExpMean))]</div>
<div class="line"><a class="reference external" href="mailto:sdcHH&#37;&#52;&#48;manipNumVars$INCTOTGROSSHH">sdcHH<span>&#64;</span>manipNumVars$INCTOTGROSSHH</a> &lt;- decIncMean[<strong>match</strong>(decInc,
<strong>names</strong>(decIncMean))]</div>
<div class="line"><em># Recalculate risks after manually changing values in sdcMicro
object</em></div>
<div class="line"><strong>calcRisks</strong>(sdcHH)</div>
</div>
<div class="line-block">
<div class="line"><em># Extract data from sdcHH</em></div>
<div class="line">HHmanip &lt;- <strong>extractManipData</strong>(sdcHH) <em># manipulated variables HH</em></div>
<div class="line"><em># Keep components of expenditure and income as share of total, use
original data since previous data was perturbed</em></div>
<div class="line">compExp &lt;- <strong>c</strong>(‘TFOODEXP’, ‘TALCHEXP’, ‘TCLTHEXP’, ‘THOUSEXP’,
‘TFURNEXP’, ‘THLTHEXP’, ‘TTRANSEXP’, ‘TCOMMEXP’, ‘TRECEXP’, ‘TEDUEXP’,
‘TRESTHOTEXP’, ‘TMISCEXP’)</div>
<div class="line">compInc &lt;- <strong>c</strong>(‘INCRMT’, ‘INCWAGE’, ‘INCFARMBSN’, ‘INCNFARMBSN’,
‘INCRENT’, ‘INCFIN’, ‘INCPENSN’, ‘INCOTHER’)</div>
<div class="line">HHmanip &lt;- <strong>cbind</strong>(HHmanip,
<strong>round</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH, fileOrigHH$IDH),
compExp] / fileOrigHH[<strong>match</strong>(fileHH$IDH, fileOrigHH$IDH),
“TANHHEXP”], 2))</div>
<div class="line">HHmanip &lt;- <strong>cbind</strong>(HHmanip,
<strong>round</strong>(fileOrigHH[<strong>match</strong>(fileHH$IDH, fileOrigHH$IDH),
compInc] / fileOrigHH[<strong>match</strong>(fileHH$IDH, fileOrigHH$IDH),
“INCTOTGROSSHH”], 2))</div>
</div>
<p><strong>Step 9a: Re-measure risk (household level)</strong></p>
<p>For the categorical variables, we conclude that we have achieved
5-anonymity in the data with local suppression. 5-anonymity also implies
2- and 3-anonymity. The global risk stayed close to zero (as the
expected number of re-identifications), which is very low. Therefore, we
conclude that based on the categorical variables, the data has been
sufficiently anonymized. One should keep in mind that the anonymization
methods applied are complementing the ones used for the SUF. <strong>NOTE: The
methods selected methods in this case study alone would not be
sufficient to protect the data set for a PUF release.</strong></p>
<p>We have reduced the risk of spontaneous recognition of households, by
removing the variable “LANDSIZEHA” and PRAMming the variables identified
to be important in the nosy neighbor scenario. An intruder cannot know
with certainty whether a household that (s)he recognizes in the data is
the correct household, due to the noise in these variables.</p>
<p>These measures refer only to the categorical variables. To evaluate the
risk of the continuous variables we could use an interval measure or
closest neighbor algorithm. These risk measures are discussed in Section
4.7. We chose to use an interval measure, since exact value matching is
not our largest concern based on the assumed scenarios and external data
sources. Instead, datasets with similar values but not the exact same
values could be used for matching. Here the main concern is that the
values are sufficiently far from the original values, which is measured
with an interval measure.</p>
<p>Example 9.39 shows how to evaluate the interval measure for the
variables “INCTOTGROSSHH” and “TANHHEXP” (total income and expenditure).
The different values of the parameter <span class="math notranslate nohighlight">\(k\)</span> in the function dRisk()
define the size of the interval around the original value as a function
of the standard deviation, as explained in Section 4.7.2<em>.</em> The larger
<span class="math notranslate nohighlight">\(k\)</span>, the larger the intervals, the higher the probability that a
perturbed value is in the interval around the original value and the
higher the risk measure. The results are satisfactory, especially when
keeping in mind that there are only 10 distinct values in the dataset
(the means of each of the deciles). All outliers have been recoded.
Looking at the proportions of the components, we do not detect any
outliers (households with an unusual high or low spending pattern in one
component).</p>
<p>Example 9.39: Measuring risk of re-identification of continuous
variables</p>
<div class="line-block">
<div class="line"><em># Risk evaluation continuous variables</em></div>
<div class="line"><strong>dRisk</strong>(sdcHH&#64;origData[,**c**(“TANHHEXP”, “INCTOTGROSSHH”)], xm
= sdcHH&#64;manipNumVars[,<strong>c</strong>(“TANHHEXP”, “INCTOTGROSSHH”)], k =
0.01)</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.4619289</span></code></p>
<p><strong>dRisk</strong>(sdcHH&#64;origData[,**c**(“TANHHEXP”, “INCTOTGROSSHH”)], xm =
sdcHH&#64;manipNumVars[,<strong>c</strong>(“TANHHEXP”, “INCTOTGROSSHH”)], k = 0.02)</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.642132</span></code></p>
<p><strong>dRisk</strong>(sdcHH&#64;origData[,**c**(“TANHHEXP”, “INCTOTGROSSHH”)], xm =
sdcHH&#64;manipNumVars[,<strong>c</strong>(“TANHHEXP”, “INCTOTGROSSHH”)], k = 0.05)</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.8258883</span></code></p>
<p><strong>Step 10a Re-measure utility (household level)</strong></p>
<p>The utility in the data has decreased compared to the raw data, mainly
because variables were completely removed. Many of the utility measures
used in case study 1 are not applicable to the PUF file. However, by
replacing the deciles with their means, we can still use the income and
expenditure variables for arithmetic operations. Also the shares of the
income and expenditure components can still be used, since they are
based on the raw data.</p>
<p>We select two additional utility measures: the decile dispersion ratio
and the share of total consumption by the poorest decile. The decile
dispersion ratio is the ratio of the average income of the top decile
and the average income of the bottom decile. Example 9.40 shows how to
compute these from the raw data and the household variables after
anonymization. Table 9.22 presents the estimated values. The differences
are small and mainly due to the removed households.</p>
<p>Table 9.22: Comparison of utility measures</p>
<table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head"><strong>Raw data</strong></th>
<th class="head"><strong>PUF file</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Decile dispersion ratio</strong></td>
<td>24.12</td>
<td>23.54</td>
</tr>
<tr class="row-odd"><td><strong>Share of consumption by the poorest decile</strong></td>
<td>0.0034</td>
<td>0.0035</td>
</tr>
</tbody>
</table>
<p>Example 9.40: Computation of decile dispersion ratio and share of total
consumption by the poorest decile</p>
<div class="line-block">
<div class="line"><em># Decile dispersion ratio</em></div>
<div class="line"><em># raw data</em></div>
<div class="line"><strong>mean</strong>(<strong>tail</strong>(<strong>sort</strong>(fileOrigHH$INCTOTGROSSHH), n = 200))
/ <strong>mean</strong>(<strong>head</strong>(<strong>sort</strong>(fileOrigHH$INCTOTGROSSHH), n =
200))</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">24.12152</span></code></p>
<p><strong>mean</strong>(<strong>tail</strong>(<strong>sort</strong>(HHmanip$INCTOTGROSSHH), n = 197)) /
<strong>mean</strong>(<strong>head</strong>(<strong>sort</strong>(HHmanip$INCTOTGROSSHH), n = 197))</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">23.54179</span></code></p>
<div class="line-block">
<div class="line"><em># Share of total consumption by the poorest decile households</em></div>
<div class="line"><strong>sum</strong>(<strong>head</strong>(<strong>sort</strong>(fileOrigHH$TANHHEXP), n = 200)) /
<strong>sum</strong>(fileOrigHH$TANHHEXP)</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.003411664</span></code></p>
<p><strong>sum</strong>(<strong>head</strong>(<strong>sort</strong>(HHmanip$TANHHEXP), n = 197)) /
<strong>sum</strong>(HHmanip$TANHHEXP)</p>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.003530457</span></code></p>
<p><strong>Merging the household- and individual-level variables</strong></p>
<p>The next step is to merge the treated household variables with the
untreated individual variables for the anonymization of the individual
level variables. Example 9.41 shows the steps to merge these files. This
also includes the selection of variables used in the anonymization of
the individual-level variables. We create the <em>sdcMicro</em> object for the
anonymization of the individual variables in the same way as for the
household variable in Example 9.31. Generally, at this stage, the
household level and individual level variables should be combined and
quasi-identifiers at both levels be used (see Section 4.4).
Unfortunately, in our dataset, this leads to long computation times.
Therefore, we create two <em>sdcMicro</em> objects, one with all key variables
(“sdcCombinedAll”) and one with only the individual level key variables
(“sdcCombined”). In Step 6b we compare the risk measures for both cases
and in Step 8b we discuss alternative approaches to keeping the complete
set of variables. We now repeat Steps 6-10 for the individual-level
variables.</p>
<p>Example 9.41: Merging the files with household and individual-level
variables and creating an <em>sdcMicro</em> object for the anonymization of the
individual-level variables</p>
<div class="line-block">
<div class="line">### Select variables (individual level)</div>
<div class="line">selectedKeyVarsIND = <strong>c</strong>(‘GENDER’, ‘REL’, ‘MARITAL’, ‘AGEYRS’,
‘EDUCY’, ‘INDUSTRY1’) <em># list of selected key variables</em></div>
<div class="line"><em># sample weight (WGTHH, individual weight)</em></div>
<div class="line">selectedWeightVarIND = <strong>c</strong>(‘WGTHH’)</div>
<div class="line"><em># Household ID</em></div>
<div class="line">selectedHouseholdID = <strong>c</strong>(‘IDH’)</div>
<div class="line"><em># Variables not suitable for release in PUF (IND level)</em></div>
<div class="line">varsNotToBeReleasedIND &lt;- <strong>c</strong>(“ATSCHOOL”, “EDYRSCURRAT”)</div>
<div class="line"><em># All individual level variables</em></div>
<div class="line">INDVars &lt;- <strong>c</strong>(selectedKeyVarsIND)</div>
<div class="line"><em># Recombining anonymized HH data sets and individual level variables</em></div>
<div class="line">indVars &lt;- <strong>c</strong>(“IDH”, “IDP”, selectedKeyVarsIND, “WGTHH”) <em># HID
and all non HH vars</em></div>
<div class="line">fileInd &lt;- file[indVars] <em># subset of file without HHVars</em></div>
<div class="line">fileCombined &lt;- <strong>merge</strong>(HHmanip, fileInd, by.x = <strong>c</strong>(‘IDH’))</div>
<div class="line">fileCombined &lt;- fileCombined[<strong>order</strong>(fileCombined[,’IDH’],
fileCombined[,’IDP’]),]</div>
<div class="line"><strong>dim</strong>(fileCombined)</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">10068</span>&#160;&#160;&#160; <span class="pre">44</span></code></p>
<div class="line-block">
<div class="line"><em># SDC objects with only IND level variables</em></div>
<div class="line">sdcCombined &lt;- <strong>createSdcObj</strong>(dat = fileCombined, keyVars =
<strong>c</strong>(selectedKeyVarsIND), weightVar = selectedWeightVarIND, hhId =
selectedHouseholdID)</div>
</div>
<div class="line-block">
<div class="line"><em># SDC objects with both HH and IND level variables</em></div>
<div class="line">sdcCombinedAll &lt;- <strong>createSdcObj</strong>(dat = fileCombined, keyVars =
<strong>c</strong>(selectedKeyVarsIND, selectedKeyVarsHH ), weightVar =
selectedWeightVarIND, hhId = selectedHouseholdID)</div>
</div>
<p><strong>Step 6b: Assessing disclosure risk (individual level)</strong></p>
<p>As first measure, we evaluate the number of records violating
<span class="math notranslate nohighlight">\(k\)</span>-anonymity at the levels 2, 3 and 5. Table 9.23 shows the
number of violating individuals as well as the percentage of the total
number of households. The second and third column refer to “sdcCombined”
and the fourth and fifth column to “sdcCombinedAll”. We see that
combining the individual level and household level variables leads to a
large increase in the number of <span class="math notranslate nohighlight">\(k\)</span>-anonymity violators. The
choice not to include the household level variables is pragmatically
driven by the computation time and can be justified by the different
type of variables on the household level and individual level. One could
assume that these variables are not available in the same dataset and
can therefore not simultaneously be used by an intruder to re-identify
individuals.</p>
<p>Table 9.23: Number of records violating k-anonimity</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head" colspan="2">sdcCombined</th>
<th class="head" colspan="2">sdcCombinedAll</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>k-anonymity</td>
<td>Number of
records
violating</td>
<td><p class="first">Percentage</p>
<p class="last">of total
records</p>
</td>
<td>Number of
records
violating</td>
<td><p class="first">Percentage</p>
<p class="last">of total
records</p>
</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>0</td>
<td>0.0 %</td>
<td>4,048</td>
<td>40.2 %</td>
</tr>
<tr class="row-even"><td>3</td>
<td>167</td>
<td>1.7 %</td>
<td>6,107</td>
<td>60.7 %</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>463</td>
<td>4.6 %</td>
<td>8,292</td>
<td>82.4 %</td>
</tr>
</tbody>
</table>
<p>The global hierarchical risk measure is 0.095%, which corresponds to
approximately 10 expected re-identifications. We use here the
hierarchical risk measure, since the re-identification of a single
household member would lead to the re-identification of the other
members of the same household too. This number is low compared to the
number of <span class="math notranslate nohighlight">\(k\)</span>-anonymity violations, due to the high sample
weights, which protect the data already to a large extent. Only 24
observations have an individual hierarchical risk higher than 1%, with a
maximum of 1.17%. This is mainly because of the lower sample weights of
these records. Example 9.42 shows how to retrieve these measures in <em>R</em>.</p>
<p>Example 9.42: Risk measures before anonymization</p>
<p>numIND &lt;- <strong>length</strong>(fileCombined[,1]) <em># number of households</em></p>
<div class="line-block">
<div class="line"><em># Number of observations violating k-anonymity</em></div>
<div class="line"><strong>print</strong>(sdcCombined)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Infos</span> <span class="pre">on</span> <span class="pre">2/3-Anonymity:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">violating</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">2-anonymity:</span> <span class="pre">0</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">3-anonymity:</span> <span class="pre">167</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Percentage</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">violating</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">2-anonymity:</span> <span class="pre">0.000</span> <span class="pre">%</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">-</span> <span class="pre">3-anonymity:</span> <span class="pre">1.659</span> <span class="pre">%</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">---------------------------------------------------------------------------</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Calculate sample frequencies and count number of obs. violating k
(3,5) - anonymity</em></div>
<div class="line">kAnon5 &lt;- <strong>sum</strong>(sdcCombined&#64;risk$individual[,2] &lt;5)</div>
<div class="line">kAnon5</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">463</span></code></p>
<div class="line-block">
<div class="line"><em># As percentage of total</em></div>
<div class="line">kAnon5 / numIND</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.04598729</span></code></p>
<div class="line-block">
<div class="line"><em># Global risk on individual level</em></div>
<div class="line"><strong>print</strong>(sdcCombined, ‘risk’)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Risk</span> <span class="pre">measures:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">observations</span> <span class="pre">with</span> <span class="pre">higher</span> <span class="pre">risk</span> <span class="pre">than</span> <span class="pre">the</span> <span class="pre">main</span> <span class="pre">part</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data:</span> <span class="pre">0</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Expected</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">re-identifications:</span> <span class="pre">1.69</span> <span class="pre">(0.02</span> <span class="pre">%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Information</span> <span class="pre">on</span> <span class="pre">hierarchical</span> <span class="pre">risk:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Expected</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">re-identifications:</span> <span class="pre">9.57</span> <span class="pre">(0.10</span> <span class="pre">%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">---------------------------------------------------------------------------</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Number of observation with relatively high risk</em></div>
<div class="line"><strong>dim</strong>(fileCombined[sdcCombined&#64;risk$individual[, “hier_risk”] &gt;
0.01,])</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">24</span> <span class="pre">44</span></code></p>
<div class="line-block">
<div class="line"><em># Highest individual risk</em></div>
<div class="line"><strong>max</strong>(sdcCombined&#64;risk$individual[, “hier_risk”])</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">[1]</span> <span class="pre">0.01169091</span></code></p>
<p><strong>Step 7b: Assessing utility measures (individual level)</strong></p>
<p>We evaluate the utility measures as discussed in Step 5 based on the raw
data (before applying any anonymization measures). The results are
presented in Step 10b together with the values after anonymization to
allow for direct comparison.</p>
<p><strong>Step 8b: Choice and application of SDC methods (individual level)</strong></p>
<p>In this step, we discuss four different techniques used for
anonymization: 1) removing variables from the dataset to be released, 2)
recoding of categorical variables to reduce the level of detail, 3)
local suppression to achieve the required level of <span class="math notranslate nohighlight">\(k\)</span>-anonymity,
4) randomization of the order of the records in the file. Finally, we
discuss some alternative options for treating the household structure in
the dataset.</p>
<p><strong>Removing variables</strong></p>
<p>Additional to the variables removed from the dataset for the SUF release
(see case study 1), we further reduce the number of variables in the
dataset to be released. This is normal practice for PUF releases.
Sensitive or identifying variables are removed, which allows to release
other variables at a more detailed level. In a PUF release, the set of
key variables should be limited.</p>
<p>In our case, we decide to remove at the individual level the variables
“EDYRSCURRAT”, as this variable is too identifying (identifies whether
there are school-going children in the household). We keep the variable
“EDUCY” (highest level of education attended) for information on
education. <strong>NOTE: As an alternative to removing the variables from the
dataset, one could also set all values to missing. This would allow the
user to see the structure and variables contained in the SUF file.</strong></p>
<p><strong>Recoding</strong></p>
<p>As noted before, PUF users require a lower level of information and
therefore we can recode the key variables even further to reduce the
disclosure risk. The recoding of variables in case study 1 is not
sufficient for a PUF release. Therefore, we recode most of the
categorical key variables from Table 9.19 to reduce the risk and number
of necessary suppressions by local suppression. Table 9.24 gives an
overview of the recodes made. All new categories are formed with the
needs of the data user in mind. Example 9.43 shows how to do this in <em>R</em>
and also shows value labels and the univariate tabulations of these
variables before and after recoding.</p>
<p>Table 9.24: Overview of recodes of categorical variables at individual
level</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Variable</strong></th>
<th class="head"><strong>Recoding</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>REL (relation to household head)</td>
<td>recode ‘Father/Mother’, ‘
Grandchild’, ‘Son/Daughter in
law’, ‘Other relative’ to ‘Other
relative’ and recode ‘Domestic
help’ and ‘Non-relative’ to
‘Other’</td>
</tr>
<tr class="row-odd"><td>MARITAL (marital status)</td>
<td>recode ‘Married monogamous’,
‘Married polygamous’, ’Common
law, union coutumiere, union
libre, living together’ to
‘Married/living together’ and
‘Divorced/Separated’ and
‘Widowed’ to
‘Divorced/Separated/Widowed’</td>
</tr>
<tr class="row-even"><td>AGEYRS (age in completed years)</td>
<td>recode values under 15 to 7
(other values have been recoded
for SUF)</td>
</tr>
<tr class="row-odd"><td>EDUCY (highest level of education
completed)</td>
<td>recode ‘Completed lower secondary
(or post-primary vocational
education) but less than
completed upper secondary’,
‘Completed upper secondary (or
extended vocational/technical
education)’, ‘Post secondary
technical’ and ‘University and
higher’ to ‘Completed lower
secondary or higher’</td>
</tr>
<tr class="row-even"><td>INDUSTRY1</td>
<td>recode to ‘primary’, ‘secondary’
and ‘tertiary’</td>
</tr>
</tbody>
</table>
<p>Example 9.43: Recoding the categorical and continuous variables</p>
<div class="line-block">
<div class="line"><em># Recode REL (relation to household head)</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$REL">sdcCombined<span>&#64;</span>manipKeyVars$REL</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span>&#160;&#160;&#160; <span class="pre">4</span>&#160;&#160;&#160; <span class="pre">5</span>&#160;&#160;&#160; <span class="pre">6</span>&#160;&#160;&#160; <span class="pre">7</span>&#160;&#160;&#160; <span class="pre">8</span>&#160;&#160;&#160; <span class="pre">9</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">1698</span> <span class="pre">1319</span> <span class="pre">4933</span>&#160;&#160; <span class="pre">52</span>&#160; <span class="pre">765</span>&#160;&#160; <span class="pre">54</span>&#160; <span class="pre">817</span>&#160;&#160; <span class="pre">40</span>&#160;&#160; <span class="pre">63</span>&#160; <span class="pre">327</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># 1 - Head, 2 - Spouse, 3 - Child, 4 - Father/Mother, 5 - Grandchild,
6 - Son/Daughter in law</em></div>
<div class="line"><em># 7 - Other relative, 8 - Domestic help, 9 - Non-relative</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “REL”, before =
<strong>c</strong>(“4”, “5”, “6”, “7”), after = <strong>c</strong>(“7”, “7”, “7”, “7”)) <em>#
other relative</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “REL”, before =
<strong>c</strong>(“8”, “9”), after = <strong>c</strong>(“9”, “9”)) <em># other</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$REL">sdcCombined<span>&#64;</span>manipKeyVars$REL</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span>&#160;&#160;&#160; <span class="pre">7</span>&#160;&#160;&#160; <span class="pre">9</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">1698</span> <span class="pre">1319</span> <span class="pre">4933</span> <span class="pre">1688</span>&#160; <span class="pre">103</span>&#160; <span class="pre">327</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Recode MARITAL (marital status)</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$MARITAL">sdcCombined<span>&#64;</span>manipKeyVars$MARITAL</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span>&#160;&#160;&#160; <span class="pre">4</span>&#160;&#160;&#160; <span class="pre">5</span>&#160;&#160;&#160; <span class="pre">6</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">3542</span> <span class="pre">2141</span>&#160; <span class="pre">415</span>&#160; <span class="pre">295</span>&#160; <span class="pre">330</span>&#160; <span class="pre">329</span> <span class="pre">3016</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># 1 - Never married, 2 - Married monogamous, 3 - Married polygamous,</em></div>
<div class="line"><em># 4 - Common law, union coutumiere, union libre, living together, 5 -
Divorced/Separated, 6 - Widowed</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “MARITAL”, before =
<strong>c</strong>(“2”, “3”, “4”), after = <strong>c</strong>(“2”, “2”, “2”)) <em>#
married/living together</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “MARITAL”, before =
<strong>c</strong>(“5”, “6”), after = <strong>c</strong>(“9”, “9”)) <em>#
divorced/seperated/widowed</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$MARITAL">sdcCombined<span>&#64;</span>manipKeyVars$MARITAL</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">9</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">3542</span> <span class="pre">2851</span>&#160; <span class="pre">659</span> <span class="pre">3016</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Recode AGEYRS (0-15 years)</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">0</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span>&#160;&#160;&#160; <span class="pre">4</span>&#160;&#160;&#160; <span class="pre">5</span>&#160;&#160;&#160; <span class="pre">6</span>&#160;&#160;&#160; <span class="pre">7</span>&#160;&#160;&#160; <span class="pre">8</span>&#160;&#160;&#160; <span class="pre">9</span>&#160;&#160; <span class="pre">10</span>&#160;&#160; <span class="pre">11</span>&#160;&#160; <span class="pre">12</span>&#160;&#160; <span class="pre">13</span>&#160;&#160; <span class="pre">14</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">311</span>&#160; <span class="pre">367</span>&#160; <span class="pre">340</span>&#160; <span class="pre">332</span>&#160; <span class="pre">260</span>&#160; <span class="pre">334</span>&#160; <span class="pre">344</span>&#160; <span class="pre">297</span>&#160; <span class="pre">344</span>&#160; <span class="pre">281</span>&#160; <span class="pre">336</span>&#160; <span class="pre">297</span>&#160; <span class="pre">326</span>&#160; <span class="pre">299</span>&#160; <span class="pre">263</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160; <span class="pre">20</span>&#160;&#160; <span class="pre">30</span>&#160;&#160; <span class="pre">40</span>&#160;&#160; <span class="pre">50</span>&#160;&#160; <span class="pre">60</span>&#160;&#160; <span class="pre">65</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">1847</span> <span class="pre">1220</span>&#160; <span class="pre">889</span>&#160; <span class="pre">554</span>&#160; <span class="pre">314</span>&#160; <span class="pre">325</span>&#160; <span class="pre">188</span></code></div>
</div>
<div class="line-block">
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “AGEYRS”, before =
<strong>c</strong>(“0”, “1”, “2”, “3”, “4”, “5”, “6”, “7”, “8”, “9”, “10”, “11”,
“12”, “13”, “14”)</div>
<div class="line">, after = <strong>rep</strong>(“7”, 15))</div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$AGEYRS">sdcCombined<span>&#64;</span>manipKeyVars$AGEYRS</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">7</span>&#160;&#160; <span class="pre">20</span>&#160;&#160; <span class="pre">30</span>&#160;&#160; <span class="pre">40</span>&#160;&#160; <span class="pre">50</span>&#160;&#160; <span class="pre">60</span>&#160;&#160; <span class="pre">65</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">4731</span> <span class="pre">1847</span> <span class="pre">1220</span>&#160; <span class="pre">889</span>&#160; <span class="pre">554</span>&#160; <span class="pre">314</span>&#160; <span class="pre">325</span>&#160; <span class="pre">188</span></code></div>
</div>
<div class="line-block">
<div class="line">sdcCombined &lt;- <strong>calcRisks</strong>(sdcCombined)</div>
<div class="line"><em># Recode EDUCY (highest level of educ compl)</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$EDUCY">sdcCombined<span>&#64;</span>manipKeyVars$EDUCY</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">0</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span>&#160;&#160;&#160; <span class="pre">4</span>&#160;&#160;&#160; <span class="pre">5</span>&#160;&#160;&#160; <span class="pre">6</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">1582</span> <span class="pre">4755</span> <span class="pre">1062</span>&#160; <span class="pre">330</span>&#160; <span class="pre">139</span>&#160;&#160; <span class="pre">46</span>&#160; <span class="pre">104</span> <span class="pre">2050</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># 0 - No education, 1 - Pre-school/ Primary not completed, 2 -
Completed primary, but less than completed lower secondary</em></div>
<div class="line"><em># 3 - Completed lower secondary (or post-primary vocational
education) but less than completed upper secondary</em></div>
<div class="line"><em># 4 - Completed upper secondary (or extended vocational/technical
education), 5 - Post secondary technical</em></div>
<div class="line"><em># 6 - University and higher</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “EDUCY”, before =
<strong>c</strong>(“3”, “4”, “5”, “6”), after = <strong>c</strong>(“3”, “3”, “3”, “3”)) <em>#
completed lower secondary or higher</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$EDUCY">sdcCombined<span>&#64;</span>manipKeyVars$EDUCY</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">0</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">1582</span> <span class="pre">4755</span> <span class="pre">1062</span>&#160; <span class="pre">619</span> <span class="pre">2050</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># Recode INDUSTRY1 ()</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$INDUSTRY1">sdcCombined<span>&#64;</span>manipKeyVars$INDUSTRY1</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span>&#160;&#160;&#160; <span class="pre">4</span>&#160;&#160;&#160; <span class="pre">5</span>&#160;&#160;&#160; <span class="pre">6</span>&#160;&#160;&#160; <span class="pre">7</span>&#160;&#160;&#160; <span class="pre">8</span>&#160;&#160;&#160; <span class="pre">9</span>&#160;&#160; <span class="pre">10</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">5300</span>&#160;&#160; <span class="pre">16</span>&#160; <span class="pre">153</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160; <span class="pre">93</span>&#160; <span class="pre">484</span>&#160;&#160; <span class="pre">95</span>&#160;&#160; <span class="pre">17</span>&#160;&#160; <span class="pre">70</span>&#160; <span class="pre">292</span> <span class="pre">3546</span></code></div>
</div>
<div class="line-block">
<div class="line"><em># 1 - Agriculture and Fishing, 2 - Mining, 3 - Manufacturing, 4 -
Electricity and Utilities</em></div>
<div class="line"><em># 5 - Construction, 6 - Commerce, 7 - Transportation, Storage and
Communication, 8 - Financial, Insurance and Real Estate</em></div>
<div class="line"><em># 9 - Services: Public Administration, 10 - Other Services, 11 -
Unspecified</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “INDUSTRY1”, before
= <strong>c</strong>(“1”, “2”), after = <strong>c</strong>(“1”, “1”)) <em># primary</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “INDUSTRY1”, before
= <strong>c</strong>(“3”, “4”, “5”), after = <strong>c</strong>(“2”, “2”, “2”)) <em>#
secondary</em></div>
<div class="line">sdcCombined &lt;- <strong>groupVars</strong>(sdcCombined, var = “INDUSTRY1”, before
= <strong>c</strong>(“6”, “7”, “8”, “9”, “10”), after = <strong>c</strong>(“3”, “3”, “3”,
“3”, “3”)) <em># tertiary</em></div>
<div class="line"><strong>table</strong>(<a class="reference external" href="mailto:sdcCombined&#37;&#52;&#48;manipKeyVars$INDUSTRY1">sdcCombined<span>&#64;</span>manipKeyVars$INDUSTRY1</a>, useNA = “ifany”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">1</span>&#160;&#160;&#160; <span class="pre">2</span>&#160;&#160;&#160; <span class="pre">3</span> <span class="pre">&lt;NA&gt;</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">5316</span>&#160; <span class="pre">248</span>&#160; <span class="pre">958</span> <span class="pre">3546</span></code></div>
</div>
<p><strong>Local suppression</strong></p>
<p>The recoding has reduced the risk already considerably. We use local
suppression to achieve the required level of <span class="math notranslate nohighlight">\(k\)</span>-anonymity.
Generally, the required level of <span class="math notranslate nohighlight">\(k\)</span>-anonymity for PUF files is 3
or 5. In this case study, we require 5-anonimity. Example 9.44 shows the
suppression pattern without specifying an importance vector. All
suppressions are made in the variable “AGEYRS”. This is the variable
with the highest number of different values, and hence considered first
by the algorithm. We try different suppression patterns by specifying
importance vectors, but we decide that the pattern without importance
vector yields the best result. This is also the result with the lowest
total number of suppressions. Less than 1 percent suppression in the age
variable is acceptable. We could reduce this number by further recoding
the variable “AGEYRS”.</p>
<p>Example 9.44: Local suppression to reach 5-anonimity</p>
<div class="line-block">
<div class="line"><em># Local suppression without importance vector</em></div>
<div class="line">sdcCombined &lt;- <strong>localSuppression</strong>(sdcCombined, k = 5, importance =
NULL)</div>
<div class="line"><em># Number of suppressions per variable</em></div>
<div class="line"><strong>print</strong>(sdcCombined, “ls”)</div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span> <span class="pre">Local</span> <span class="pre">Suppression:</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">KeyVar</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(#)</span> <span class="pre">|</span> <span class="pre">Suppressions</span> <span class="pre">(%)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">GENDER</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">REL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160; <span class="pre">MARITAL</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160; <span class="pre">AGEYRS</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">91</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.904</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">EDUCY</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">##</span>&#160; <span class="pre">INDUSTRY1</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0</span> <span class="pre">|</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">0.000</span></code></div>
</div>
<p><strong>Randomization of order of records</strong></p>
<p>The records in the dataset are ordered by region and household ID. There
is a certain geographical order of the households within the regions,
due to the way the households IDs were assigned. Intruders could
reconstruct suppressed values by using this structure. To prevent this,
we randomly reorder the records within the regions. Example 9.45 shows
how to do this in <em>R</em>. We first count the number of records per region
(<strong>NOTE: Some records have their region value suppressed, so we include
the count of NAs</strong>). Subsequently, we draw randomly household IDs, in
such way that the regional division is respected. Finally, we sort the
file by the new, randomized, individual ID (“IDP”). Households with
suppressed values for “REGION” will be last in the reordered file.
Before randomizing the order, we extract the data from the <em>sdcMicro</em>
object “sdcCombined” as shown in Example 9.45.</p>
<p>Example 9.45: Randomizing the order of records within regions</p>
<div class="line-block">
<div class="line"><em># Randomize order of households dataAnon and recode IDH to random
number (sort file by region)</em></div>
<div class="line"><strong>set.seed</strong>(97254)</div>
<div class="line"><em># Sort by region</em></div>
<div class="line">dataAnon &lt;- dataAnon[<strong>order</strong>(dataAnon$REGION),]</div>
</div>
<div class="line-block">
<div class="line"><em># Number of households per region</em></div>
<div class="line">hhperregion &lt;-
<strong>table</strong>(dataAnon[<strong>match</strong>(<strong>unique</strong>(dataAnon$IDH),
dataAnon$IDH), “REGION”], useNA = “ifany”)</div>
<div class="line"><em># Randomized IDH (household ID)</em></div>
<div class="line">randomHHid &lt;- <strong>c</strong>(<strong>sample</strong>(1:hhperregion[1], hhperregion[1]),
<strong>unlist</strong>(<strong>lapply</strong>(1:(<strong>length</strong>(hhperregion)-1),
function(i){<strong>sample</strong>((<strong>sum</strong>(hhperregion[1:i]) + 1):
<strong>sum</strong>(hhperregion[1:(i+1)]), hhperregion[(i+1)])})))</div>
</div>
<div class="line-block">
<div class="line">dataAnon$IDH &lt;- <strong>rep</strong>(randomHHid,
<strong>table</strong>(dataAnon$IDH)[<strong>match</strong>(<strong>unique</strong>(dataAnon$IDH),
<strong>as.numeric</strong>(<strong>names</strong>(<strong>table</strong>(dataAnon$IDH))))])</div>
<div class="line"><em># Sort by IDH (and region)</em></div>
<div class="line">dataAnon &lt;- dataAnon[<strong>order</strong>(dataAnon$IDH),]</div>
</div>
<p><strong>Alternative options for dealing with household structure</strong></p>
<p>In Step 6b we compared the disclosure risk for two cases: one with only
individual level key variables and another with individual level and
household level key variables combined. We decided to use only the
individual level key variables to reduce the computation time and
justified this choice by arguing that intruders cannot use household and
individual level variables simultaneously. This might not always be the
case. Therefore we explore other options to reduce the risk when taking
both individual level and household level variables into account. We
present two options: removing the household structure; and using options
in the local suppression algorithm.</p>
<p><em>Removing household structure</em></p>
<p>We consider the risk emanating from the household structure in the
dataset to be very high. We can remove the hierarchical household
structure completely and treat all variables at the individual level.
This entails, besides removing the household id (“IDH”), also treating
variables that could be used for reconstructing households. These are,
for instance, “REL” (relation to household head), “HHSIZE” (household
size), and any of the household level variables, such as income and
expenditure. However, not all household level variables need to be
treated. For example, “REGION” is a household level variable, but the
probability that this variable leads to the reconstruction of a
household is low. Also, we need to reorder the records in the file, as
they are sorted by households. Note that by removing the household
structure, we interpret all variables as individual level variables for
measuring disclosure risk. This leads to a lower need for recoding and
suppression, since the hierarchical risk disappears. The reason why we
did not opt for this approach is the loss of utility for the user. The
household structure is an important feature of the data, and should be
kept in the PUF file.</p>
<p><em>Using different options for local suppression</em></p>
<p>The long running time is mainly due to the local suppression algorithm.
In Section 5.2.2 we discuss options to reduce the running time of the
local suppression in case of many key variables. The all-<span class="math notranslate nohighlight">\(m\)</span>
approach reduces the running time by first considering subsets of the
complete set of key variables. This reduces the complexity of the
problem and leads to lower computation times. However, the total number
of suppressions made is likely to be higher. Also, if not explicitly
specified, it is not guaranteed that the required level for
<span class="math notranslate nohighlight">\(k\)</span>-anonymity is automatically achieved on the complete set of key
variables. It is therefore important to check the results.</p>
<p><strong>Step 9b: Re-measure risk</strong></p>
<p>We re-evaluate the risk measures selected in Step 6. Table 9.25 shows
that local suppression, not surprisingly, has reduced the number of
individuals violating 5-anonymity to 0. The global hierarchical risk was
reduced to 0.02%, which corresponds to approximately 2 correct
re-identifications. The highest individual hierarchical
re-identification risk is 0.2%. These risk levels are acceptable for a
PUF release. Furthermore, the recoding has removed any unusual
combinations in the data. <strong>NOTE: The risk may be underestimated by
excluding the household level variables.</strong></p>
<p>Table 9.25: k-anonymity violations</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="50%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>k-anonymity</strong></th>
<th class="head"><strong>Number of records violating</strong></th>
<th class="head"><strong>Percentage</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0.0 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>0</td>
<td>0.0 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>0</td>
<td>0.0 %</td>
</tr>
</tbody>
</table>
<p><strong>Step 10b: Re-measure utility</strong></p>
<p>We compare (cross-)tabulations before and after anonymization, which are
illustrated in the <em>R</em> code to this case study. We note that due to the
recoding in Step 8b, the detail in the variables is reduced. This
reduces the number of necessary suppressions and is acceptable for a
public use file.</p>
<p><strong>Step 11: Audit and reporting</strong></p>
<p>In the audit step, we check whether the data allow for reproduction of
published figures from the original dataset and relationships between
variables and other data characteristics are preserved in the
anonymization process. In short, we check whether the dataset is valid
for analytical purposes. There are no figures available that were
published from the dataset and need to be reproducible from the
anonymized data.</p>
<p>In Step 2, we explored the data characteristics and relationships
between variables. These data characteristics and relationships have
been mainly preserved, since we took them into account when choosing the
appropriate anonymization methods. Since values of the variable “AGEYRS”
were not perturbed, but only recoded and suppressed, we did not
introduce unlikely combinations, such as a 60-year-old individual
enrolled in primary education. Also, by separating the anonymization
process into two parts, one for household-level variables and one for
individual-level variables, the values of variables measured at the
household level agree for all members of each household.</p>
<p>Furthermore, we drafted two reports, internal and external, on the
anonymization of the case study dataset. The internal report includes
the methods used, the risk before and after anonymization as well as the
reasons for the selected methods and their parameters. The external
report focuses on the changes in the data and the loss in utility. Focus
here should be on the number of suppressions as well as the perturbative
methods (PRAM). This is described in the previous steps. <strong>NOTE: When
creating a PUF, it is inevitable that there will be a loss of
information and it is very important for the users to be aware of these
changes and release them in a report that accompanies the data.</strong>
Appendix C provides examples of an internal and external report of the
anonymization process of this dataset. Depending on the users and
readers of the reports, the content may differ. <strong>NOTE: The report()
function in sdcMicro</strong> <strong>is at this point not useful, since this will
only report on the SDC measures in the second case study.</strong> However, the
report should contain the entire process, including the measures applied
in case study 1.</p>
<p><strong>Step 12: Data release</strong></p>
<p>The final step is the release of the anonymized dataset together with
the external report. Example 9.46 shows how to export the anonymized
dataset as <em>STATA</em> file. Section 7.2 presents functions for exporting
files in other data formats.</p>
<p>Example 9.46: Exporting the anonymized PUF file</p>
<div class="line-block">
<div class="line"><em># Create STATA file</em></div>
<div class="line"><strong>write.dta</strong>(dataframe = dataAnon, file= ‘Case2DataAnon.dta’,
convert.dates=TRUE)</div>
</div>
<table class="docutils footnote" frame="void" id="foot71" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Other methods and guidance on treating datasets where household size
is a quasi-identifier are discussed in Section 5.5.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="foot72" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>For illustrative purposes, we only show this evaluation for the
expenditure variables. It can be easily copied for the income
variables. The results are similar.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="foot73" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>To compute the GINI coefficient, bootstrap to construct the
confidence intervals and plot the Lorenz curve we used the <em>R</em>
packages <em>laeken, reldist, bootstrap</em> and <em>ineq</em>.</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="lists.html" class="btn btn-neutral" title="Lists" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Matthew Welch.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>